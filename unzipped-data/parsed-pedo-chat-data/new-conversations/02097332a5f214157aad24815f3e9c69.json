{
    "id": "02097332a5f214157aad24815f3e9c69",
    "messages": [
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:51): sorry, went out for food",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:51): I've a doubt right now, using a portknocker and iptables rules",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:51): The portknocker works fine",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:51): but when It does:",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:52): /sbin/iptables -A INPUT -s %IP% -p tcp --dport 21 -j ACCEPT",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:52): it &quot;does not&quot; really open the port",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:52): I just have I rule: ipt -A INPUT -p tcp --dport 21 -j DROP",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:52): that's all",
        "45ee7098dc9acbc6c0b2244197bc65b3 (23:52): Any idea why?",
        "f38c246d1e68379d394e08662cf798a9 (00:02): dererk: ftp specific ?",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:02): yes",
        "f38c246d1e68379d394e08662cf798a9 (00:03): RELATED ?",
        "d949efae795da71ef603b60b018d191c (00:03): RELATED is for things like FTP Data connetions, or IRC DCC",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:03): Uhm",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:03): maybe you're right",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:03): didn't take that into account",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:11): Uhm",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:18): Nope Regit",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:18): Tryied with port 25 and got the same",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:20): iptables -A INPUT -p tcp --dport 25 -j DROP",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:20): That's the rule I use to block the traffic",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:21): and this one I'm trying to use it to open it:",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:21): /sbin/iptables -A INPUT -s %IP% -p tcp --dport 25 -j ACCEPT",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:21): maybe there's something more I'll need to open it",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:21): I really don't know what",
        "de76c8e6cbbc3c1c44788a340cac141e (00:21): maxine: rule order",
        "d949efae795da71ef603b60b018d191c (00:21): rule order is important, because rules are evaluated in order until one matches. iptables -I can be used to insert the rule at the start of a chain; iptables -A puts it at the end",
        "b366ada111a96ac010aff47c0ca59cdb (00:22): hei",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:22): oh shit",
        "b366ada111a96ac010aff47c0ca59cdb (00:22): I submitted a patch do netfilter-devel a few days ago, but it looks like it never made it through",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:22): I thought It was &quot;-I&quot;",
        "5f05b3ded4139f6a691da91429a957b9 (00:22): I saw someone do a port knock with -m recent; I don't remember the exact details, but it shouldn't be too difficult to work up",
        "b366ada111a96ac010aff47c0ca59cdb (00:22): what is the normal procedure?",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:22): danieldg, sorry, didn't realise about it",
        "de76c8e6cbbc3c1c44788a340cac141e (00:23): dererk: simple mistake, np",
        "de76c8e6cbbc3c1c44788a340cac141e (00:23): I have a port knock example on my site <a href=\"http://daniel.6dns.org/info/iptables/\">http://daniel.6dns.org/info/iptables/</a>",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:23): FUCK",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:23): that's was",
        "5f05b3ded4139f6a691da91429a957b9 (00:23): danieldg: maybe that's what I remember - thanks",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:24): danieldg, GREAT!",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:24): I'm going to look at it right now",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:24): I can't believe I was so blind not to see it was -A insted -I",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:25): danieldg, just 'cause I'm a bit curious, are you involved in ipt development ?",
        "de76c8e6cbbc3c1c44788a340cac141e (00:25): a little - I usually read the devel list and I've submitted some small patches",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:26): hope I could some day do the same :)",
        "45ee7098dc9acbc6c0b2244197bc65b3 (00:26): danieldg, thanks so much again",
        "de76c8e6cbbc3c1c44788a340cac141e (00:27): yw",
        "f38c246d1e68379d394e08662cf798a9 (00:27): danieldg: did'nt know we have a bot here",
        "f38c246d1e68379d394e08662cf798a9 (00:27): maxine: -Z",
        "d949efae795da71ef603b60b018d191c (00:27): Regit: huh?",
        "f38c246d1e68379d394e08662cf798a9 (00:28): courmisch: wait and retry",
        "b366ada111a96ac010aff47c0ca59cdb (00:28): that's what I just did",
        "f38c246d1e68379d394e08662cf798a9 (00:28): and ask on #netfilter",
        "b366ada111a96ac010aff47c0ca59cdb (00:28): looks like whoever's on moderation duty is not",
        "f38c246d1e68379d394e08662cf798a9 (00:29): courmisch: which patch ?",
        "b366ada111a96ac010aff47c0ca59cdb (00:30): <a href=\"http://bugs.debian.org/cgi-bin/bugreport.cgi/ipv6-multiport-range.patch?bug=329775;msg=34;att=1\">http://bugs.debian.org/cgi-bin/bugreport.cgi/ipv6-multiport-range.patch?bug=329775;msg=34;att=1</a>",
        "b366ada111a96ac010aff47c0ca59cdb (00:30): hmph",
        "b366ada111a96ac010aff47c0ca59cdb (00:30): Remote host said: 550 &lt;<email/>&gt;: Recipient address rejected: User unknown in virtual alias table",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): Giving up on 70.103.162.31.",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): ahem",
        "de76c8e6cbbc3c1c44788a340cac141e (00:31): is that fixed with xt_multiport now?",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): shame on me",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): kernel is fixed",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): userland is not",
        "de76c8e6cbbc3c1c44788a340cac141e (00:31): oh",
        "b366ada111a96ac010aff47c0ca59cdb (00:31): hence the patch",
        "f38c246d1e68379d394e08662cf798a9 (00:32): lists.debian.org ? harald uses debian but he's not part of it ;p",
        "b366ada111a96ac010aff47c0ca59cdb (00:32): yeah",
        "b366ada111a96ac010aff47c0ca59cdb (00:32): I fucked up the retransmit",
        "b366ada111a96ac010aff47c0ca59cdb (00:33): my mail agent autocompletion seems to be too clever",
        "b366ada111a96ac010aff47c0ca59cdb (00:34): anyway, the patch is fairly big since ip6tables basically lack match versioning completely",
        "b366ada111a96ac010aff47c0ca59cdb (00:34): and it's not possible (AFAIK) to use xt_multiport_v1 without versioning",
        "b366ada111a96ac010aff47c0ca59cdb (00:34): otherwise, it's pretty much a cut &amp; paste from the ipv4 code with s/ip/ip6/"
    ],
    "person_ids": [
        "45ee7098dc9acbc6c0b2244197bc65b3",
        "f38c246d1e68379d394e08662cf798a9",
        "d949efae795da71ef603b60b018d191c",
        "de76c8e6cbbc3c1c44788a340cac141e",
        "b366ada111a96ac010aff47c0ca59cdb",
        "5f05b3ded4139f6a691da91429a957b9"
    ]
}