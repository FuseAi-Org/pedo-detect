{
    "id": "bf56592eb7c749713974e4e76553e96c",
    "messages": [
        "960023bb50a6d2f2887ee8a80dbc7ef6 (05:57): When copying data from either one of my cd drives (one DVD, one CD) ... the transfer goes nice and fast when I start it... 3-6Mb/sec or so... then all of a sudden it drops to a constant 600k/sec.  Any idea whats happening here?  Using Debian Linux..  Nothing showing up in dmesg, or syslogs..  Same with any disc",
        "ae2723c5c3c9da84b0c32669c7b01e60 (06:18): JohnQ, 600k/sec would be a 4x CD drive... estimation errors at the beginning of transfers are not unusual",
        "ae2723c5c3c9da84b0c32669c7b01e60 (06:18): DVD sure be more, io'",
        "ae2723c5c3c9da84b0c32669c7b01e60 (06:18): i'm sure...",
        "ad226162a094c6324b5f5a178b055fce (06:19): you want to see poor speed estimation?",
        "ad226162a094c6324b5f5a178b055fce (06:19): <a href=\"http://wegotsnakes.com/images/speedy.png\">http://wegotsnakes.com/images/speedy.png</a>",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:20): Its not at the beginning... its the end.. Halfway through copying it just drops from 40x to 4x.",
        "d78f4062e6225cbd9dd887b05eb828ed (06:23): blah!",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (06:25): JohnQ, does hdparm say DMA is on?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:26): Yep. udma2",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (06:31): JohnQ, &quot;hdparm -i /dev/cdrom&quot; only says the mode, you have to use &quot;hdparm -d /dev/cdrom&quot; to find if it's on",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:31): yes, it is on.",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (06:35): what speed was advertised?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:36): One drive is a 40x max and the other is a DVD drive that says it can read a CD @ 32x max",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:37): It isn't a CAV issue... reading the same file twice (with an eject in between to clear the cache) will sometimes result in the drive falling into slow mode, and sometimes not.",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (06:37): In order to switch it back to normal once it switches to slow.. I need to physically eject the tray... just umount/mount won't do it.",
        "ac20ba5da58bb36e3f5c24b7bb0332dc (06:55): Can someone find me a good motherboard? I have all the other hardware so I'll just tell you what kind to be compabtible.",
        "ac20ba5da58bb36e3f5c24b7bb0332dc (06:56): Because I'm not good with buying hardware... so I just want someone to check/be sure.",
        "ac20ba5da58bb36e3f5c24b7bb0332dc (06:56): ... ?",
        "ae2723c5c3c9da84b0c32669c7b01e60 (06:57): you can't depend on getting a good answer to a question with so many dependencies",
        "ae2723c5c3c9da84b0c32669c7b01e60 (06:57): but go ahead and say what you want...",
        "ac20ba5da58bb36e3f5c24b7bb0332dc (06:58): Well, onboard audio/video (good video hopefully). 184-pin DDR2 (PCI3200 400MHz) ram slots (at least two).",
        "ac20ba5da58bb36e3f5c24b7bb0332dc (06:58): Oh, and my processor is a Intel Pentium D Core Duo, so...",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:03): This is what makes my think the drive speed problems I am having are not CAV related.  The picture shows one continuous read of one large file from my cdrom:  <a href=\"http://129.82.99.20/gkrellm.png\">http://129.82.99.20/gkrellm.png</a>",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:06): JohnQ, what is being measured there?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:06): throughput",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:08): so it drops for a long time, then spikes and goes constant?",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:08): i can't think of why that would happen",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:09): Me either.. the gap is only about a second long.. and then it stays constant at 600.  the gentle slope in the beginning is the CAV effects.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:09): what is CAV, JohnQ?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:11): Constant Angular Velocity... reads go faster on the perimeter of the disc than on the inner edge...",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:11): ahh, yes.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:11): if only you could track the head position along with the throughput rate",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:11): of course, in-drive buffering probably distorts whatever trend the machinery exhibits",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:12): If I copy the same file again.. the point where it drops to 600k/s is different.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:12): exactly, and i'm sure you know why",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:13): Not really.. I mean.. it's probably not an issue with the media... or the drive... so I am gessing it is some sort of software issue..",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:14): any and all caching will affect subsequent reads",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:14): ya.. which is why I eject the cd between tests, so there will be no cache efects.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:15): i'm not sure that would eliminate them",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:15): it does... the kernel dumps the cache whwn you unmount the FS.",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:16): just a umount / mount would clear the cache.. but in order to get the drive to go full speed after it goes slow I need to physically eject it too.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:17): i think there are more caches in play than you can enumerate",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:17): but if the problem is apparent even with a cached file, this is immaterial",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:17): Right.. but none of them will remember the CD once it has been physically removed.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:17): i really don't know if that assertion is true",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:18): some of linux's RAM caching might, for example",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:18): well if it's a cached file, the drive doesnt even read..",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:18): so read a different file each time... big deal",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:18): it just copies from memory.. so the graph never even registers it..",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:19): Yeah.. but my point is, that this isnt a cache issue.",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:19): for some reason, either the drive, or the driver, or SOMETHING seems to just switch into a slower mode for an unidentified reason..",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:21): what happens if you read a big file that is the size of the CD?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:21): thats exactly what I was doing to make that graph :-)",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:21): ah",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:22): how much data was read at that point?",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:23): and does the DVD drive show the same dropoff?",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:24): yes, i want to know what else happened then",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:24): about 1/3 of it... about 250Mb",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:24): neftune, yeah, both drives do it.. but neither one ever does it at the same point in the read.",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:25): what else happened?  .. nothing of note... the machine is basically idle..  I have been unable to correlate anything with the dropoffs.",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:25): the drive's buffer definitely isn't that big",
        "98b0e32e2abc8ae03eec7ba2ddc90da1 (07:25): how much RAM do you have?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:25): 2Gb",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:25): hmmm...",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:28): JohnQ, when you are reading a DVD, does the speed change occur at 250MB or at 1/3 of the DVD?",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:30): Neither, consistantly.. even when reading the same media twice it never occurs at the same point.  the most I managed to copy in one go before it flatlined was 1.2 Gig.. but really it seems to just happen at a random point.  Sometimes its almost immediate.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:31): hmm, i thought you said it was pretty reliable...",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:31): you already varied the drive, maybe try varying the drive controller",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:31): also make sure you have as many debugging options set in the kernel as are available",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:31): amazingly enough, the drives arent even on the same controller :-/",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:32): Not sure how to turn on debugging in the cdrom drivers though.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:34): hmm, i wonder which higher layers it could be",
        "960023bb50a6d2f2887ee8a80dbc7ef6 (07:36): I think the most frustrating part is that it still works... It doesnt keep me from copying things from discs.. but it just shouldnt be this way.",
        "ae2723c5c3c9da84b0c32669c7b01e60 (07:36): yes, sounds frustrating",
        "d78f4062e6225cbd9dd887b05eb828ed (07:36): the crock hunter was killed by a sting-ray!!",
        "d78f4062e6225cbd9dd887b05eb828ed (07:36): wierd",
        "d78f4062e6225cbd9dd887b05eb828ed (07:36): Krickey !!"
    ],
    "person_ids": [
        "960023bb50a6d2f2887ee8a80dbc7ef6",
        "ae2723c5c3c9da84b0c32669c7b01e60",
        "ad226162a094c6324b5f5a178b055fce",
        "d78f4062e6225cbd9dd887b05eb828ed",
        "98b0e32e2abc8ae03eec7ba2ddc90da1",
        "ac20ba5da58bb36e3f5c24b7bb0332dc"
    ]
}