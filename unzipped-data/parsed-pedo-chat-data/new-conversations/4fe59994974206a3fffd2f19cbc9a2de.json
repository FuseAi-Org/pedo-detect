{
    "id": "4fe59994974206a3fffd2f19cbc9a2de",
    "messages": [
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:17): eca88ce0deea1275223afe139b2595e2: We need to deal with stuff at a Unicode level in the TreeBuilder so we can coerce what we have into an XML infoset, which means we will either need to decode the data _again_, or we just use an array of codepoints, which eats memory\u201a\u00c4\u00b6",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:17): sighs",
        "eca88ce0deea1275223afe139b2595e2 (00:19): Oh, we want XML infoset support?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:19): eca88ce0deea1275223afe139b2595e2: We need to, if we are to use DOM\u201a\u00c4\u00b6",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:19): eca88ce0deea1275223afe139b2595e2: It's the cause of all 10 current exceptions thrown",
        "eca88ce0deea1275223afe139b2595e2 (00:19): Well, I have no intentions of staying on DOM",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:20): eca88ce0deea1275223afe139b2595e2: How are you going to write anything in userland with anywhere near decent perf? :)",
        "eca88ce0deea1275223afe139b2595e2 (00:20): Write it in C and PHP",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:20): eca88ce0deea1275223afe139b2595e2: Not re-distributable.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:20): (Well, sure, it is, but if you want to ship it in normal software\u201a\u00c4\u00b6)",
        "eca88ce0deea1275223afe139b2595e2 (00:20): Performance is &quot;not re-distributable&quot;",
        "eca88ce0deea1275223afe139b2595e2 (00:20): We'll obviously have a PHP drop-in replacement",
        "eca88ce0deea1275223afe139b2595e2 (00:21): A userland tree implementation can have decent performance, given some concessions on the tree-builder and API side",
        "eca88ce0deea1275223afe139b2595e2 (00:21): Decent enough, at least, for anyone who wants to casually use the library",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:21): What would be nice would be to get DOM to do no checks when strictErrorHandling = false",
        "eca88ce0deea1275223afe139b2595e2 (00:22): What's more likely to happen is that userspace SimpleTree will blow up memory usage",
        "eca88ce0deea1275223afe139b2595e2 (00:22): (not that DOM doesn't do that already, but you can't see that if you profile)",
        "eca88ce0deea1275223afe139b2595e2 (00:22): a11aabeeceeae6b8cb5d12ea06b56554: We filed a bug on that a long time. Didn't work.",
        "eca88ce0deea1275223afe139b2595e2 (00:22): *a long time ago",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:23): Didn't work in what way?",
        "09bbaca4ac9c0978a8287a7d28999985 (00:23): Hi, can anyone tell me how websockets will handle/support binary data? Will you be able to download the bytes of a jpeg through it and load it in the DOM for example?",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:23): eventually, yes",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:23): not in the first version though",
        "eca88ce0deea1275223afe139b2595e2 (00:24): As in, they were like, WONTFIX, and proceeded to add the check for the place they missed",
        "eca88ce0deea1275223afe139b2595e2 (00:24): Let me dig up the bug",
        "eca88ce0deea1275223afe139b2595e2 (00:24): (we had this conversation before)",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:24): http://bugs.php.net/bug.php?id=44648&amp;edit=1?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): That's the only thing I find looking for http://bugs.php.net/bug.php?id=44648&amp;edit=1",
        "eca88ce0deea1275223afe139b2595e2 (00:25): Ya, that's it",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): *strictErrorHandling",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): Clipboard fail.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): I got told that it could be done\u201a\u00c4\u00b6 if I wrote the patch.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): Which is all fine and well\u201a\u00c4\u00b6 if it isn't for the fact I don't know C. :P",
        "eca88ce0deea1275223afe139b2595e2 (00:25): It's not that difficult a patch",
        "eca88ce0deea1275223afe139b2595e2 (00:25): PHP insulates you sufficiently from actually C-ness",
        "eca88ce0deea1275223afe139b2595e2 (00:25): The hard problem is figuring out how to compile PHP",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:25): I couldn't work out how to get the strictErrorHandling property",
        "eca88ce0deea1275223afe139b2595e2 (00:26): Hm.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:26): If I could work that out, I could probably write a patch :P",
        "eca88ce0deea1275223afe139b2595e2 (00:26): That's slightly non-trivial",
        "eca88ce0deea1275223afe139b2595e2 (00:26): Anyway, I still argue, that's not tenable for the sake of portability",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:26): How so? Older shipped versions?",
        "eca88ce0deea1275223afe139b2595e2 (00:27): Yep",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:27): Agreed, but in the longer-term it would be nice to be able to use it.",
        "eca88ce0deea1275223afe139b2595e2 (00:27): Sure.",
        "eca88ce0deea1275223afe139b2595e2 (00:27): I wonder if SimpleXML does checking...",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:27): In places.",
        "09bbaca4ac9c0978a8287a7d28999985 (00:28): does anyone have basic websocket support now?",
        "eca88ce0deea1275223afe139b2595e2 (00:28): :-(",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:28): wishes they would fix XMLWriter so you could actually rely on it outputting XML.",
        "ab7faae5d7b250ea8606486575f8f79c (00:28): An XML serialiser that outputs XML? I think you're asking for too much",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:29): http://bugs.php.net/bug.php?id=41800",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:29): See, it's not a bug!",
        "eca88ce0deea1275223afe139b2595e2 (00:29): a11aabeeceeae6b8cb5d12ea06b56554: If you want to take a stab at it again (I probably won't have time for it this weekend), the first thing you'll want to figure out is whether or not it's something stored in the PHP layer, or the libxml layer",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:30): eca88ce0deea1275223afe139b2595e2: I don't care enough. I have too many bad experiences to think I have any chance of it ever being committed.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:31): http://bugs.php.net/bug.php?id=44619",
        "eca88ce0deea1275223afe139b2595e2 (00:32): They're going to fix it The Right Way! No Really!",
        "eca88ce0deea1275223afe139b2595e2 (00:32): More seriously,",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:33): adds XMLWriter grips to his list of problems with PHP",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:33): *gripe",
        "eca88ce0deea1275223afe139b2595e2 (00:33): I think the PHP dev community is not too receptive about patches unless you bug them a lot about it",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:33): *gripes",
        "eca88ce0deea1275223afe139b2595e2 (00:33): You will almost certainly not get a patch that big into PHP5.2. Maybe PHP5.3",
        "ab7faae5d7b250ea8606486575f8f79c (00:33): a11aabeeceeae6b8cb5d12ea06b56554: Are you foolishly expecting the XML serialiser to deal with the issues of encoding data so it can be serialised as XML? Clearly that should be the user's responsibility",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:34): ab7faae5d7b250ea8606486575f8f79c: I am expecting an XML serializer to always output something that meets the document production in the XML spec.",
        "ab7faae5d7b250ea8606486575f8f79c (00:34): It's a bug that they've even got any methods other than $xml-&gt;write('&lt;test&gt;blabla&lt;/test&gt;')",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:34): 09bbaca4ac9c0978a8287a7d28999985: webkit and mozilla are working on it, i believe",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:35): eca88ce0deea1275223afe139b2595e2: I bet you 5.3 will be in commit freeze by the time I get around to anything like writing a patch\u201a\u00c4\u00b6",
        "ab7faae5d7b250ea8606486575f8f79c (00:35): (It's up to you to make sure the data is encoded properly)",
        "eca88ce0deea1275223afe139b2595e2 (00:36): So, if PHP didn't have binary strings by default, this would make sense",
        "09bbaca4ac9c0978a8287a7d28999985 (00:36): 69b0d3dfe919a6b860a9fac82de52a7e: great, I guess I'll wait patiently for a bit :)",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:36): eca88ce0deea1275223afe139b2595e2: s/by default/always/",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:38): 09bbaca4ac9c0978a8287a7d28999985: you and me both!",
        "eca88ce0deea1275223afe139b2595e2 (00:38): Well, if most of the strings whizzing around are UTF-16, and then I want to put a binary string into the XML writer",
        "eca88ce0deea1275223afe139b2595e2 (00:38): I'd say it has two options: refuse to do anything with it, or base64 encode it",
        "09bbaca4ac9c0978a8287a7d28999985 (00:38): 69b0d3dfe919a6b860a9fac82de52a7e, huh, here's a video claiming minefield has WebSocket support ...",
        "09bbaca4ac9c0978a8287a7d28999985 (00:38): http://www.youtube.com/watch?v=CrV9jJQn_MA",
        "eca88ce0deea1275223afe139b2595e2 (00:39): &quot;Fixing it&quot; so that it's well-formed UTF-whatever is totally not the correct behavior.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:39): eca88ce0deea1275223afe139b2595e2: I'd expect it to die.",
        "eca88ce0deea1275223afe139b2595e2 (00:39): And then, you can't even do that the smart way in PHP, because it doesn't have any notion of types",
        "eca88ce0deea1275223afe139b2595e2 (00:39): So this won't get fixed until PHP 6, when we get Unicode strings",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:40): 09bbaca4ac9c0978a8287a7d28999985: that's a demo of the work they're doing, it's not in yet i don't think",
        "eca88ce0deea1275223afe139b2595e2 (00:40): PHP is currently operating an abstraction level too low",
        "eca88ce0deea1275223afe139b2595e2 (00:40): And this is a leak.",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:46): Up to 12 items on my list of problems with PHP\u201a\u00c4\u00b6",
        "eca88ce0deea1275223afe139b2595e2 (00:47): i,i Only twelve?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:47): So far :)",
        "a11aabeeceeae6b8cb5d12ea06b56554 (00:47): These are mainly fairly high-level issues."
    ],
    "person_ids": [
        "a11aabeeceeae6b8cb5d12ea06b56554",
        "eca88ce0deea1275223afe139b2595e2",
        "09bbaca4ac9c0978a8287a7d28999985",
        "69b0d3dfe919a6b860a9fac82de52a7e",
        "ab7faae5d7b250ea8606486575f8f79c"
    ]
}