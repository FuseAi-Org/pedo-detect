{
    "id": "68ace3bf62979d2e9c0797644893cae5",
    "messages": [
        "3f2e2531201cfbf853f16f668132eaf2 (13:54): will hold off on &quot;canvas shadows should not be optional&quot; until there's more than one implementation of them",
        "139513027e8e90b5582cbc68fc733884 (13:58): is there really only one?",
        "3f2e2531201cfbf853f16f668132eaf2 (13:59): There's a patch which adds shadows to Mozilla (which I wrote), but that was after the FF3 feature freeze so it wasn't included",
        "3f2e2531201cfbf853f16f668132eaf2 (13:59): and I'm not aware of any other shadow implementations",
        "3f2e2531201cfbf853f16f668132eaf2 (14:01): (...other than WebKit)",
        "139513027e8e90b5582cbc68fc733884 (14:01): see, I was about to make a test case to make sure I wasn't insane",
        "3f2e2531201cfbf853f16f668132eaf2 (14:02): See http://philip.html5.org/tests/canvas/suite/tests/index.2d.shadow.html if you want test cases :-)",
        "3f2e2531201cfbf853f16f668132eaf2 (14:03): (Hmm, Opera (which doesn't do shadows at all) still scores 25% on there...)",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:05): stepping through the XML parser in debugger I always wonder whether I should have rolled my own or used Xerces as the basis instead of ?\u00dclfred...",
        "139513027e8e90b5582cbc68fc733884 (14:05): no, I was just pretty sure that the Safari implemenation of canvas did shadows (and that this was the reason it was in the spec) so I was briefly confused when you said an experimental Mozilla patch was the only implementation",
        "3f2e2531201cfbf853f16f668132eaf2 (14:06): 139513027e8e90b5582cbc68fc733884: Ah, sorry, the Safari one is burned into my mind sufficiently that I didn't think to mention it explicitly :-)",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:06): huh? shadows before dashed stroking???",
        "3f2e2531201cfbf853f16f668132eaf2 (14:07): b8810fee2f4a71f849f3f7409546d1d9: Web 2.0 needs shadows, not dashes!",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:07): 3f2e2531201cfbf853f16f668132eaf2: you are right, of course. dashes are *so* 1988",
        "3f2e2531201cfbf853f16f668132eaf2 (14:07): roundedRect(x, y, w, h, cornerRadius) would be nice too",
        "139513027e8e90b5582cbc68fc733884 (14:08): (Safari does pass only 68% of those shadow tests)",
        "139513027e8e90b5582cbc68fc733884 (14:09): (a lot of the failures seem to be for lame reasons though)",
        "e3fb62ebfa4f36acf5cbff6a6ed0f2e0 (14:09): not a reason not to fix them!",
        "139513027e8e90b5582cbc68fc733884 (14:09): 'Failed assertion ctx.shadowColor === 'rgba(0, 255, 0, 0.0)' (got RGBA(0,255, 0,0)[string], expected rgba(0, 255, 0, 0.0)[string])'",
        "e3fb62ebfa4f36acf5cbff6a6ed0f2e0 (14:09): we should make &lt;canvas&gt; interop a bit better so we can focus on introducing more holes in new features such as dashes, rounded corners, text, etc.",
        "139513027e8e90b5582cbc68fc733884 (14:09): dunno if I'd lose a lot of sleep over that one",
        "139513027e8e90b5582cbc68fc733884 (14:10): yeah, the fact that there's good canvas test suites is a plus",
        "3f2e2531201cfbf853f16f668132eaf2 (14:10): 139513027e8e90b5582cbc68fc733884: http://bugs.webkit.org/show_bug.cgi?id=15266 is the most significant bug",
        "3f2e2531201cfbf853f16f668132eaf2 (14:10): http://bugs.webkit.org/show_bug.cgi?id=15265 is the only other one I bothered reporting",
        "3f2e2531201cfbf853f16f668132eaf2 (14:11): You could argue about what &quot;bug&quot; means when the spec doesn't actually specify the behaviour at all, but I'll stick with my definition for now since I think it makes sense :-)",
        "3f2e2531201cfbf853f16f668132eaf2 (14:12): (where &quot;my definition&quot; is http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2007-June/011799.html )",
        "139513027e8e90b5582cbc68fc733884 (14:12): if I wanted to fix canvas compliance bugs I probably wouldn't start with the shadow stuff",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:12): e3fb62ebfa4f36acf5cbff6a6ed0f2e0: did you write internal subset support on top of html5lib?",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:13): DTDs are the main reason not to make a copy of the Validator.nu HTML parser and turn in into an XML parser",
        "e3fb62ebfa4f36acf5cbff6a6ed0f2e0 (14:13): the XML5 parser is based on the same code structre as html5lib but that's it",
        "3f2e2531201cfbf853f16f668132eaf2 (14:13): 139513027e8e90b5582cbc68fc733884: That sounds sensible, since there's nobody to interoperate with yet",
        "139513027e8e90b5582cbc68fc733884 (14:16): I can't tell what is going on in your shadow gradient examples here: http://philip.html5.org/demos/canvas/shadows/various.html",
        "139513027e8e90b5582cbc68fc733884 (14:16): (the rest look reasonably ok to me)",
        "3f2e2531201cfbf853f16f668132eaf2 (14:18): 139513027e8e90b5582cbc68fc733884: If you look in e.g. Firefox, you can see what the unshadowed gradient looks like",
        "3f2e2531201cfbf853f16f668132eaf2 (14:18): i.e. a square, with some transparent bits around the lower right",
        "3f2e2531201cfbf853f16f668132eaf2 (14:19): so the shadow should be the same shape and the same pattern of transparentness, but offset down/right",
        "3f2e2531201cfbf853f16f668132eaf2 (14:19): but if I remember correctly, it gets clipped to the source rectangle or something instead of being offset properly",
        "139513027e8e90b5582cbc68fc733884 (14:20): my FF3 beta fails to render the gradients at all",
        "139513027e8e90b5582cbc68fc733884 (14:20): (launching FF2)",
        "3f2e2531201cfbf853f16f668132eaf2 (14:21): 139513027e8e90b5582cbc68fc733884: How old beta? Might be https://bugzilla.mozilla.org/show_bug.cgi?id=402527",
        "3f2e2531201cfbf853f16f668132eaf2 (14:21): (assuming you're using a Mac)",
        "139513027e8e90b5582cbc68fc733884 (14:21): so we are drawing a solid shadow under the whole gradient filled area I guess?",
        "139513027e8e90b5582cbc68fc733884 (14:22): that won't be fun to fix, it is probably a CoreGraphics bug so we might have to hand-code shadow drawing for gradients",
        "3f2e2531201cfbf853f16f668132eaf2 (14:22): I can't remember exactly what Safari was doing, and it looks like I don't have screenshots of it",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:22): eww... ?\u00dclfred has even pointless recursion where a loop would make sense...",
        "3f2e2531201cfbf853f16f668132eaf2 (14:23): Are bugs ever fun to fix? :-)",
        "139513027e8e90b5582cbc68fc733884 (14:23): I prefer fixing bugs that are in code where I actually work on",
        "3f2e2531201cfbf853f16f668132eaf2 (14:25): Incidentally, it seems quite trivial to DOS the browser by rendering something with a really high shadowBlur",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:26): is trying to fix bugs in code I'm at least the fourth maintainer of...",
        "3f2e2531201cfbf853f16f668132eaf2 (14:26): (I clamped shadowBlur to 2000 (i.e. ~190 pixel radius) for Mozilla)",
        "139513027e8e90b5582cbc68fc733884 (14:27): I think we set a limit too, at least for text-shadow",
        "3f2e2531201cfbf853f16f668132eaf2 (14:30): tries to find a runnable version of Safari somewhere",
        "3f2e2531201cfbf853f16f668132eaf2 (14:48): http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A%3Cbody%20onload%3Dwith(document.getElementById('c').getContext('2d'))%7BshadowColor%3D'yellow'%3BshadowBlur%3D10000%3BfillStyle%3D'blue'%3BfillRect(100%2C50%2C100%2C50)%7D%3E%0D%0A%3Ccanvas%20id%3Dc%3E%3C%2Fcanvas%3E",
        "3f2e2531201cfbf853f16f668132eaf2 (14:48): 139513027e8e90b5582cbc68fc733884: That uses a few hundred megabytes of memory and freezes for longer than I can be bothered waiting (i.e. at least a minute)",
        "3f2e2531201cfbf853f16f668132eaf2 (14:50): has no idea why that's so inefficient - it should be O(shadowBlur) memory and O(sqrt(shadowBlur)) time, I think",
        "3f2e2531201cfbf853f16f668132eaf2 (14:51): guesses that's CoreGraphics's fault",
        "139513027e8e90b5582cbc68fc733884 (14:51): so yeah, I'm not gonna click that link :-)",
        "139513027e8e90b5582cbc68fc733884 (14:51): but thanks",
        "139513027e8e90b5582cbc68fc733884 (14:51): we should probably limit the blur"
    ],
    "person_ids": [
        "3f2e2531201cfbf853f16f668132eaf2",
        "139513027e8e90b5582cbc68fc733884",
        "b8810fee2f4a71f849f3f7409546d1d9",
        "e3fb62ebfa4f36acf5cbff6a6ed0f2e0"
    ]
}