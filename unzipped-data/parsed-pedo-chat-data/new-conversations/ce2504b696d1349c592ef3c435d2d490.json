{
    "id": "ce2504b696d1349c592ef3c435d2d490",
    "messages": [
        "bb21c722adad611b63dfb48ec99e8350 (12:25): 69b0d3dfe919a6b860a9fac82de52a7e: do you have plans to fix history session in HTML5? I'll propose something if I figure out how I'd like it to work.",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:26): i wasn't aware that it was broken",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:26): if it's broken, then i plan to fix it",
        "bb21c722adad611b63dfb48ec99e8350 (12:27): 69b0d3dfe919a6b860a9fac82de52a7e: I sent an email about it",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:27): ah then i have plans to read and respond to your e-mail, yes",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:27): it'll be in my queue somewhere",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:28): is it urgent?",
        "bb21c722adad611b63dfb48ec99e8350 (12:28): it doesn't explain how iframe history works in previous top level pages",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:28): (i plan to basically respond to all outstanding bugs and e-mails by the end of the month)",
        "bb21c722adad611b63dfb48ec99e8350 (12:28): well, I'd like to implement it, like now :)",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:29): ah ok",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:29): let me see if i can give you a preliminary answer",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:32): do you know if there are compatibility concerns here?",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:33): looks like IE8 does what the spec says right?",
        "bb21c722adad611b63dfb48ec99e8350 (12:34): browsers implement go() in different ways, so perhaps no compatibility concerns",
        "bb21c722adad611b63dfb48ec99e8350 (12:34): IE8 is quite close",
        "bb21c722adad611b63dfb48ec99e8350 (12:34): those its back button doesn't map to go() handling. Maybe that is UA dependent thing",
        "bb21c722adad611b63dfb48ec99e8350 (12:35): s/those/though/",
        "bb21c722adad611b63dfb48ec99e8350 (12:36): 69b0d3dfe919a6b860a9fac82de52a7e: still, what in the spec explains that the previous top level page should load latest iframe document?",
        "042dd99eb0ff8653814e445ca0093427 (12:37): dammit",
        "bb21c722adad611b63dfb48ec99e8350 (12:37): the draft doesn't really say anything about what should happen to sub-browsing contexts when previous top level page is loaded",
        "042dd99eb0ff8653814e445ca0093427 (12:38): I thought I found an ambiguity in the spec, but I was wrong",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:38): what IE8 does seems to have security advantages, though it does mean that for go(x) where |x| &gt; 1 the back button doesn't match the API",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:38): dunno if that's a problem",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:39): bb21c722adad611b63dfb48ec99e8350: hold on, minor cat emergency",
        "042dd99eb0ff8653814e445ca0093427 (12:41): is it documented what the owner document is for an element created with &quot;new Audio()&quot;?",
        "73eaf221abca1b8244e34b0b9e76ac46 (12:44): 042dd99eb0ff8653814e445ca0093427: what happens for new Image()?",
        "042dd99eb0ff8653814e445ca0093427 (12:44): no idea",
        "042dd99eb0ff8653814e445ca0093427 (12:45): I *assume* that you use the document of the current global object, which must be a Window",
        "042dd99eb0ff8653814e445ca0093427 (12:45): I'm not JS-savvy enough to know if you can get into a situation where there is no Window in scope",
        "042dd99eb0ff8653814e445ca0093427 (12:46): but the spec doesn't seem to say, or if it does, I don't know where",
        "65325d50b2e25aca54bc871b89758c9c (12:46): the spec doesn't say what the owner document should be (very clearly)",
        "65325d50b2e25aca54bc871b89758c9c (12:47): it should say invoking the Audio constructor is equivalent to document.createElement() followed by setting some attributes",
        "65325d50b2e25aca54bc871b89758c9c (12:47): or something like that",
        "042dd99eb0ff8653814e445ca0093427 (12:47): it can't say that since 'document' might refer to something strange",
        "73eaf221abca1b8244e34b0b9e76ac46 (12:48): files a bug",
        "bb21c722adad611b63dfb48ec99e8350 (12:48): 042dd99eb0ff8653814e445ca0093427: yeah, at least gecko finds the document from caller and uses that as owner document",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:50): bb21c722adad611b63dfb48ec99e8350: ok back",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:51): bb21c722adad611b63dfb48ec99e8350: assuming we do go with the IE8 model, then a literal reading of the spec would mean that when you go back, you just end up in whatever state you happened to last be when that top-level browsing context last had that document active",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:51): bb21c722adad611b63dfb48ec99e8350: which means that if you were to go to A-2, then fast-forward to B-2, then go(-2), you should end up at A-2 again",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:52): bb21c722adad611b63dfb48ec99e8350: even though going go(+1) from there would take you to A-3",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:52): bb21c722adad611b63dfb48ec99e8350: and then going go(+1) again would take you to B-2, not B-1",
        "042dd99eb0ff8653814e445ca0093427 (12:52): bb21c722adad611b63dfb48ec99e8350: do you happen to know what happens if we call new Audio in a context where there is no document? like say a JS XPCOM component? (this is obviously beyond the realm of HTML5)",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:52): i guess we should see what IE does with those cases",
        "bb21c722adad611b63dfb48ec99e8350 (12:52): 042dd99eb0ff8653814e445ca0093427: I don't think that is supported",
        "042dd99eb0ff8653814e445ca0093427 (12:53): ok, but what happens? :-)",
        "bb21c722adad611b63dfb48ec99e8350 (12:53): 042dd99eb0ff8653814e445ca0093427: calling the constructor fails",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:53): bb21c722adad611b63dfb48ec99e8350: can you stick a javascript:go(-2) and a javascript:go(+1) to A-2, A-3, B-1, and B-2?",
        "042dd99eb0ff8653814e445ca0093427 (12:53): ok",
        "bb21c722adad611b63dfb48ec99e8350 (12:54): boots a windows machine",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:54): woo, IE8 does do what i said for the first thing i described",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:54): the go(-2) case where you navigated the history as i described",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:55): and then clicking forward from A-2 goes to A-3, and from there goes to B-2",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:55): and clicking back there goes to B-1",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:55): not saying that's the most understandable UI",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:55): but it does match what I'd expect the API to do per the spec",
        "bb21c722adad611b63dfb48ec99e8350 (12:55): 69b0d3dfe919a6b860a9fac82de52a7e: but the go(-3) goes to the startpage in my testcase",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:56): right, it would",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:56): because the subframes aren't in the joint history",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:56): the subframes of the inactive documents, i mean",
        "bb21c722adad611b63dfb48ec99e8350 (12:56): and still, where does the draft say what the iframes should load when going back in top level page?",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:57): well there are two possible cases:",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:57): 1. bfcache is active, doc is in the cache: you just show it as it was, unchanged",
        "bb21c722adad611b63dfb48ec99e8350 (12:57): that is easy",
        "bb21c722adad611b63dfb48ec99e8350 (12:57): that is why I disable bfcache",
        "bb21c722adad611b63dfb48ec99e8350 (12:57): at least for gecko",
        "bb21c722adad611b63dfb48ec99e8350 (12:57): but without bfcache",
        "bb21c722adad611b63dfb48ec99e8350 (12:58): (btw, do all the browsers have something like? maybe chrome doesn't, at least its back-forward is slower than in other browsers)",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:59): 2. doc was evicted from bfcache, and you have to refetch the document and rerender it and so forth: the iframes are considered &quot;persisted user state&quot; which the UA is allowed to resync",
        "69b0d3dfe919a6b860a9fac82de52a7e (12:59): i should probably spec that in more detail",
        "bb21c722adad611b63dfb48ec99e8350 (13:00): and how can the browser know which iframe loads which page?",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:00): beats me",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:00): how does firefox do it?",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:00): the most obvious solution is to serialise the state of each frame's frames[] hierarchy",
        "bb21c722adad611b63dfb48ec99e8350 (13:01): gecko has a tree of browsing contexts",
        "bb21c722adad611b63dfb48ec99e8350 (13:01): or tree of session histories",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:01): and just walk down the tree as each one onloads, navigating its subframes accordingly",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:01): but how does it map them to iframes?",
        "bb21c722adad611b63dfb48ec99e8350 (13:01): but the way it is implemented doesn't work well with dynamic iframe additions/removals",
        "bb21c722adad611b63dfb48ec99e8350 (13:02): it tries to map session history tree to browsing context tree",
        "bb21c722adad611b63dfb48ec99e8350 (13:02): and with dynamic iframe additions/removals that isn't always right",
        "bb21c722adad611b63dfb48ec99e8350 (13:02): ...and that is what I'm trying to fix",
        "bb21c722adad611b63dfb48ec99e8350 (13:03): but I'd like to fix it to do something which is actually spec'ed somewhere",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:03): what do other UAs do?",
        "bb21c722adad611b63dfb48ec99e8350 (13:04): not sure.",
        "bb21c722adad611b63dfb48ec99e8350 (13:04): well, webkit's go() handling is already so strange that it is difficult to test",
        "bb21c722adad611b63dfb48ec99e8350 (13:06): but as a starting point I'd like to understand how go() should work",
        "bb21c722adad611b63dfb48ec99e8350 (13:06): and then figure out what to do with dynamic changes",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:07): well the spec doesn't really say what to do with iframes when reloading a document evicted from the bfcache (or never stored in the first place)",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:07): i'm more or less happy to spec anything you come up with, if it's sane and/or matches implementations and/or legacy content expectations",
        "bb21c722adad611b63dfb48ec99e8350 (13:08): ok, I'll continue testing",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:08): for things in the bfcache, it seems the spec matches IE8, which is good",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:08): so i'd like to standardise on that",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:09): it seems to make sense and is relatively easy to describe",
        "bb21c722adad611b63dfb48ec99e8350 (13:09): yeah, I haven't seen anything in IE8's behavior that I'm against at. (except its back button functionality)",
        "69b0d3dfe919a6b860a9fac82de52a7e (13:10): well the back button and the go() API don't have to match, so you're welcome to make that work however you like",
        "bb21c722adad611b63dfb48ec99e8350 (13:11): does anyone know how to disable bfcache in IE?  Would unload handler be enough?",
        "73eaf221abca1b8244e34b0b9e76ac46 (13:29): i wonder what i'm doing wrong with getting a webkit nightly to run with safari on windows",
        "73eaf221abca1b8244e34b0b9e76ac46 (13:30): run-nightly-webkit.cmd doesn't do anything, and FindSafari.exe gives an error message saying some configuration is wrong",
        "6d05f0c2942adc25946a4b02b37ffa00 (13:30): did you run the install script?",
        "6d05f0c2942adc25946a4b02b37ffa00 (13:30): remembers some exe file",
        "6d05f0c2942adc25946a4b02b37ffa00 (13:30): oh, dunno then",
        "73eaf221abca1b8244e34b0b9e76ac46 (13:33): if i paste the contents of the extracted folder into the Safari folder and replace the files, then FindSafari.exe and run-nightly-webkit.cmd still do the same thing and Safari.exe stops working",
        "6d05f0c2942adc25946a4b02b37ffa00 (13:34): nuke all and start over?",
        "73eaf221abca1b8244e34b0b9e76ac46 (13:34): still same result",
        "6d05f0c2942adc25946a4b02b37ffa00 (13:34): ask in #webkit?",
        "73eaf221abca1b8244e34b0b9e76ac46 (13:34): k",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:51): another nail in the coffin of conneg: https://twitter.com/glazou/statuses/4705685278",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:55): Single language keywords in indexes pose a problem for HTTP conneg?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:56): Or am I proving I'm half-asleep at the moment, under the theory I can't do any language when half asleep?",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:56): crawlers presumably index only one of the language alternatives",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:56): Ah, that sort of index",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:56): I was thinking of the sort of index that CSS 2.1 has of various terms",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:56): (which has no problems with conneg)",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:57): the kind of conneg that works is gzip conneg.",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:57): which arguably is an architectural error",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:57): shoud be a characteristic of the HTTP hop--not the representation",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:58): should",
        "b25b6b77a0087ff8385941e5545d32ea (13:59): HTTP hop?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (13:59): A hop and a jump, obviously.",
        "b8810fee2f4a71f849f3f7409546d1d9 (13:59): b25b6b77a0087ff8385941e5545d32ea: origin server to intermediary or intermediary to intermediary or intermediary to client",
        "b25b6b77a0087ff8385941e5545d32ea (14:00): Hmm I don't clearly see what alternative you are proposing",
        "b25b6b77a0087ff8385941e5545d32ea (14:01): (for some definition of proposing which means &quot;not proposing but suggesting might have been better in the first place&quot;)",
        "b8810fee2f4a71f849f3f7409546d1d9 (14:02): b25b6b77a0087ff8385941e5545d32ea: Transfer-Encoding",
        "b25b6b77a0087ff8385941e5545d32ea (14:02): Ah",
        "a11aabeeceeae6b8cb5d12ea06b56554 (14:02): (Quick! Music suggestions!)",
        "b25b6b77a0087ff8385941e5545d32ea (14:04): The minute waltz is quite a quick piece of music"
    ],
    "person_ids": [
        "bb21c722adad611b63dfb48ec99e8350",
        "69b0d3dfe919a6b860a9fac82de52a7e",
        "042dd99eb0ff8653814e445ca0093427",
        "73eaf221abca1b8244e34b0b9e76ac46",
        "65325d50b2e25aca54bc871b89758c9c",
        "6d05f0c2942adc25946a4b02b37ffa00",
        "b8810fee2f4a71f849f3f7409546d1d9",
        "a11aabeeceeae6b8cb5d12ea06b56554",
        "b25b6b77a0087ff8385941e5545d32ea"
    ]
}