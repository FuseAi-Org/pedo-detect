{
    "id": "a7dda1d8a1f6fb2abd82c8abb5c724d4",
    "messages": [
        "bb21c722adad611b63dfb48ec99e8350 (23:53): anyone seen Anne?",
        "69b0d3dfe919a6b860a9fac82de52a7e (23:53): not recently",
        "ae4117767e99e87f2b87e0b7d88d4199 (00:03): he said he was going to be travelling for a few weeks - back toward the end of november",
        "bb21c722adad611b63dfb48ec99e8350 (00:11): 69b0d3dfe919a6b860a9fac82de52a7e: so about &lt;eventsource&gt;",
        "bb21c722adad611b63dfb48ec99e8350 (00:11): someone may inject that to a page",
        "bb21c722adad611b63dfb48ec99e8350 (00:11): and then it connects to anyway",
        "bb21c722adad611b63dfb48ec99e8350 (00:12): &quot;anywhere&quot; may be some evil server with support for AC",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:12): hm?",
        "bb21c722adad611b63dfb48ec99e8350 (00:13): I hadn't noticed that support for AC was added there at some point",
        "bb21c722adad611b63dfb48ec99e8350 (00:13): (still haven't found out any good way to search changes in html 5)",
        "bb21c722adad611b63dfb48ec99e8350 (00:14): 69b0d3dfe919a6b860a9fac82de52a7e: and then the evil server may dispatch events to the content",
        "bb21c722adad611b63dfb48ec99e8350 (00:14): which are handled by the event listeners...",
        "bb21c722adad611b63dfb48ec99e8350 (00:16): &lt bb21c722adad611b63dfb48ec99e8350&gt; and then it connects to anywhere",
        "bb21c722adad611b63dfb48ec99e8350 (00:16): &lt bb21c722adad611b63dfb48ec99e8350&gt; &quot;anywhere&quot; may be some evil server with support for AC",
        "bb21c722adad611b63dfb48ec99e8350 (00:16): should learn to type, and even in English :p",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:16): i really have no idea what you're asking :-)",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:17): can you try again with antecedants for all your &quot;it&quot;s and &quot;that&quot;s and full sentences? :-)",
        "bb21c722adad611b63dfb48ec99e8350 (00:17): bah",
        "bb21c722adad611b63dfb48ec99e8350 (00:18): 69b0d3dfe919a6b860a9fac82de52a7e: so some site accepts user generated content. So probably not scripts, but elements",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:18): ok",
        "bb21c722adad611b63dfb48ec99e8350 (00:19): and user adds &lt;eventsource src=&quot;someevilsite_with_access_control&quot;&gt;",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:19): and the site filters it, because &lt;eventsource&gt; isn't in their whitelist",
        "bb21c722adad611b63dfb48ec99e8350 (00:19): are you sure sites do that",
        "bb21c722adad611b63dfb48ec99e8350 (00:19): whitelisting",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:19): they better, using a blacklist with html is the quickest way to get xss'ed",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:20): but let's assume they do have this gaping hole and use a blacklist, and so &lt;eventsource&gt; goes through",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:20): continue with the attack description",
        "bb21c722adad611b63dfb48ec99e8350 (00:20): then server sends random events",
        "bb21c722adad611b63dfb48ec99e8350 (00:21): although they are MessageEvents, their type can be anything",
        "bb21c722adad611b63dfb48ec99e8350 (00:21): so the evil server could possible trigger any event listener on the page",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:22): not really",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:22): the events don't bubble",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:22): he could trigger any capturing event listener in the chain",
        "bb21c722adad611b63dfb48ec99e8350 (00:22): well, capturing event listeners",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:22): yes",
        "bb21c722adad611b63dfb48ec99e8350 (00:22): right",
        "bb21c722adad611b63dfb48ec99e8350 (00:23): let's try otherway, what is the reason to have &lt;eventsource&gt;?",
        "bb21c722adad611b63dfb48ec99e8350 (00:23): .addEventSource/.removeEventSource should be IMO enough",
        "a924fb58d2c25874322f4e5126f608b9 (00:23): Have you ever seen a capturing listener used without it being an accident or misguided?",
        "bb21c722adad611b63dfb48ec99e8350 (00:23): a924fb58d2c25874322f4e5126f608b9: yes",
        "bb21c722adad611b63dfb48ec99e8350 (00:23): all the time",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:23): a924fb58d2c25874322f4e5126f608b9: we've already established teh site author makes serious mistakes",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:24): since he's not whitelisting",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:24): bb21c722adad611b63dfb48ec99e8350: so that you can declare an event source simply",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:24): bb21c722adad611b63dfb48ec99e8350: addEventSource() is a pain, and i'd rather remove that altogether frankly",
        "bb21c722adad611b63dfb48ec99e8350 (00:26): why is that pain?",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:27): far more power than necessary",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:27): being able to do XMLHttpRequest.addEventSource() is just silly",
        "bb21c722adad611b63dfb48ec99e8350 (00:27): well, with the current spec, perhaps yes",
        "bb21c722adad611b63dfb48ec99e8350 (00:28): when the spec had the support for dispatching any kinds of server sent events, the situation was a bit different",
        "bb21c722adad611b63dfb48ec99e8350 (00:28): server-sent-events could have been used to emulate user interaction (at least in some cases)",
        "bb21c722adad611b63dfb48ec99e8350 (00:29): er, simulate",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:29): not well, but yes",
        "bb21c722adad611b63dfb48ec99e8350 (00:30): this whole &lt;eventsource&gt; thingie came up in our server-sent-events security review",
        "bb21c722adad611b63dfb48ec99e8350 (00:31): other issue was adopting node to a new document",
        "bb21c722adad611b63dfb48ec99e8350 (00:31): what should happen then",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:32): nothing special, why?",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:33): (you can't adopt cross-origin)",
        "bb21c722adad611b63dfb48ec99e8350 (00:33): so the connection is kept alive",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:33): sure",
        "bb21c722adad611b63dfb48ec99e8350 (00:33): ok",
        "bb21c722adad611b63dfb48ec99e8350 (00:33): fine to me",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:33): good good :-)",
        "bb21c722adad611b63dfb48ec99e8350 (00:33): but still, &lt;eventsource&gt; + evil site",
        "bb21c722adad611b63dfb48ec99e8350 (00:34): what to do with that",
        "bb21c722adad611b63dfb48ec99e8350 (00:35): one option could be that &lt;eventsource&gt; shouldn't support AC",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:37): dude if we're assuming the site isn't using a whitelist, the site is so owned already there's really not much to discuss",
        "bb21c722adad611b63dfb48ec99e8350 (00:37): eh",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:39): e.g. what if the user slides in an &lt;output&gt; element with an onforminput=&quot;&quot; attribute?",
        "bb21c722adad611b63dfb48ec99e8350 (00:42): yeah, that is bad",
        "bb21c722adad611b63dfb48ec99e8350 (00:42): for the site",
        "bb21c722adad611b63dfb48ec99e8350 (00:43): and for the vendor which is the first implementator of that feature",
        "bb21c722adad611b63dfb48ec99e8350 (00:43): (vendor X browser users hacked site FooBar)",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:45): opera's already implemented &lt;output&gt;",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:45): has for years",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:45): blacklists are a fast track to getting owned",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:46): they are highly insecure",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:46): i'm shocked that anyone at mozilla considers them even a plausible security measure",
        "bb21c722adad611b63dfb48ec99e8350 (00:46): I understand whitelisting is what should be done",
        "bb21c722adad611b63dfb48ec99e8350 (00:46): but that isn't what all the site necessarily do",
        "69b0d3dfe919a6b860a9fac82de52a7e (00:46): sure, some do neither whitelisting nor blacklisting"
    ],
    "person_ids": [
        "bb21c722adad611b63dfb48ec99e8350",
        "69b0d3dfe919a6b860a9fac82de52a7e",
        "ae4117767e99e87f2b87e0b7d88d4199",
        "a924fb58d2c25874322f4e5126f608b9"
    ]
}