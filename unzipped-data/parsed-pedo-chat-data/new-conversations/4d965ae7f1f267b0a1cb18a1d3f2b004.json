{
    "id": "4d965ae7f1f267b0a1cb18a1d3f2b004",
    "messages": [
        "a36ce7ae1130478e5c64a077a04575ae (19:01): danieldg, are you there??",
        "a36ce7ae1130478e5c64a077a04575ae (19:20): please help... this is my firewall rules <a href=\"http://pastebin.com/770002\">http://pastebin.com/770002</a>, and this are my interfaces <a href=\"http://pastebin.com/770006\">http://pastebin.com/770006</a>, I need to make ping from outside of my network to a public Ip inside my network like (208.35.102.13) but I can't make it .... any suggest?",
        "a36ce7ae1130478e5c64a077a04575ae (19:23): If I make a traceroute to this address the connectio dies in my intput interface .... the extrange thing is that I can make ping to my public address in my other interface 208.35.102.1",
        "a36ce7ae1130478e5c64a077a04575ae (19:23): please help",
        "a42624e60c354ef9b10da3dfb465457c (19:34): hello, I have a rule that does NAT on incoming ssh trafic to a local machine, on a custom port",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:35): (totally OT) does anyone knows of some solutions to get from a linux router the processus that has attempted a connection on a windows one ?",
        "a42624e60c354ef9b10da3dfb465457c (19:35): this works ok, but now I would like to change the ssh port to a non standard port (say 65001), and this does not work, any clues why ?",
        "a42624e60c354ef9b10da3dfb465457c (19:39): more precisely : 'iptables -i eth1 -t nat -A PREROUTING -p tcp --dport 22 -j DNAT --to-destination $LOCAL_IP:54159' works fine, and when changing --dport to 65001 it fails",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:40): what does &quot;it fails&quot; mean ?",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:41): did you bind sshd on local_ip to correct port then ?",
        "a42624e60c354ef9b10da3dfb465457c (19:41): for example when telneting from outside on 65001, trafic seems blocked, nothing happens",
        "a42624e60c354ef9b10da3dfb465457c (19:41): yes it is bound on the correct port, I can ssh with --dport 22",
        "a42624e60c354ef9b10da3dfb465457c (19:42): (or from the router to $LOCAL_IP:54159 also)",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:43): but you changed that to 65001",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:43): so you have to check that your sshd on local_ip is listenning to 65001",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:44): or I misunderstood what you wanna do",
        "a42624e60c354ef9b10da3dfb465457c (19:45): I thought --dport 22 + $LOCAL_IP:54159 meant that the port in TCP headers was rewriten from 22 to 54159",
        "a42624e60c354ef9b10da3dfb465457c (19:46): isn't it the case ?",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:46): did you check the man about what you are writing ?",
        "a42624e60c354ef9b10da3dfb465457c (19:46): sure",
        "a42624e60c354ef9b10da3dfb465457c (19:47): also checked the site in /topic but I can't find an example looking like what I want to do :)",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (19:47): you want to access an sshd on your lan from the net at a non standard port on your router don't you ?",
        "a42624e60c354ef9b10da3dfb465457c (19:48): yes, and the sshd on the lan also runs on a non standard port",
        "a42624e60c354ef9b10da3dfb465457c (19:48): (because I have two sshd, one for the lan and another for the outside)",
        "a42624e60c354ef9b10da3dfb465457c (19:52): --dport 54159 + --to-destination $LOCAL_IP:54159 does not work either",
        "a42624e60c354ef9b10da3dfb465457c (19:53): what confuses me is that it works ok with --dport 22 :)",
        "a42624e60c354ef9b10da3dfb465457c (19:58): maybe that's an ssh issue.",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:02): yep as I said you gotta check your sshd is properly listenning to the right port",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:02): you can use netcat for testing purpose",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:02): like, on the local_ip you do &quot;nc -l -p 54159&quot;",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:02): on the router you put the DNAT rule you wrote",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:03): and telnet from inet to router:54159",
        "13fbb6cc9f88ccfc50845bb81132b4d4 (20:03): you may talk with netcat",
        "a42624e60c354ef9b10da3dfb465457c (20:03): thanks for the tip i did'nt knew that",
        "05d47a27f3c818abbf125051a57b268c (20:06): setting up iptables,  any help would be appreciated,  <a href=\"http://pastebin.com/770104\">http://pastebin.com/770104</a>",
        "8424fc362733d1e863a5f4bb3e8c3cb0 (20:07): Johhny23|work: ${WAN} is empty",
        "8424fc362733d1e863a5f4bb3e8c3cb0 (20:08): (perhaps)",
        "8424fc362733d1e863a5f4bb3e8c3cb0 (20:09): try echo ${WAN}",
        "05d47a27f3c818abbf125051a57b268c (20:10): lol,  I was being stupid,  had set export WAN=eth1 but then I rebooted before the last command I tried",
        "05d47a27f3c818abbf125051a57b268c (20:10): :P",
        "a42624e60c354ef9b10da3dfb465457c (20:13): ok I can talk with netcat listening on port 123 with --dport 22 and --to-destination $LOCAL_IP:123 from the outside (telnet $ROUTER_IP 22)",
        "a42624e60c354ef9b10da3dfb465457c (20:13): but not with --dport 23 or anything else, so the problem lies in my routing setup",
        "9299067386c74d29bacdfdd7a3fac45f (20:24): Hello. I am trying to redirect all traffic with dest IP XX &amp; dest port YY to destination port ZZ port YY. XX is an IP on my server. ZZ is an IP on another server of mine. is this possible with iptables?",
        "9299067386c74d29bacdfdd7a3fac45f (20:25): i meant IP ZZ, not port ZZ",
        "a42624e60c354ef9b10da3dfb465457c (20:27): rickBL: iptables -i eth1 -t nat -A PREROUTING -p tcp --dport YY -j DNAT --to-destination ZZ",
        "9299067386c74d29bacdfdd7a3fac45f (20:27): this is what I came up with:",
        "9299067386c74d29bacdfdd7a3fac45f (20:27): iptables -t nat -A PREROUTING -d X -p tcp --dport Y -j DNAT --to-destination Z",
        "9299067386c74d29bacdfdd7a3fac45f (20:27): iptables -t nat -A POSTROUTING -d Z -p tcp --dport Y -j SNAT --to-source X",
        "a42624e60c354ef9b10da3dfb465457c (20:28): rickBL: replace -i eth1 with your external interface",
        "9299067386c74d29bacdfdd7a3fac45f (20:28): ya",
        "9299067386c74d29bacdfdd7a3fac45f (20:28): do i really need only one?",
        "9299067386c74d29bacdfdd7a3fac45f (20:28): will the requesting client be OK with receiving the tcp packet from a server it didn't orginally send it to?",
        "9299067386c74d29bacdfdd7a3fac45f (20:28): i meant, do i really need only one rule?",
        "a42624e60c354ef9b10da3dfb465457c (20:29): yes, but I don't think you need the POSTROUTING stuff",
        "9299067386c74d29bacdfdd7a3fac45f (20:30): where is XX in your command?",
        "a42624e60c354ef9b10da3dfb465457c (20:31): it is implicit if you specify the external interface with -i",
        "9299067386c74d29bacdfdd7a3fac45f (20:32): hey dude, resend any messages",
        "a42624e60c354ef9b10da3dfb465457c (20:32): XX is implicit if you specify the external interface with -i",
        "a42624e60c354ef9b10da3dfb465457c (20:32): i guess you also have to enable forwarding in the kernel",
        "9299067386c74d29bacdfdd7a3fac45f (20:32): but i have IPs on here i dont want to redirect",
        "9299067386c74d29bacdfdd7a3fac45f (20:34): ?",
        "a42624e60c354ef9b10da3dfb465457c (20:34): you can use -d so",
        "9299067386c74d29bacdfdd7a3fac45f (20:34): ok let me give it a shot",
        "9299067386c74d29bacdfdd7a3fac45f (20:34): the only thing i dont understand, like i said before",
        "a36ce7ae1130478e5c64a077a04575ae (20:34): please help... this is my firewall rules <a href=\"http://pastebin.com/770002\">http://pastebin.com/770002</a>, and this are my interfaces <a href=\"http://pastebin.com/770006\">http://pastebin.com/770006</a>, I need to make ping from outside of my network to a public Ip inside my network like (208.35.102.13) but I can't make it .... any suggest?",
        "d949efae795da71ef603b60b018d191c (20:34): i already had it that way, seele_.",
        "9299067386c74d29bacdfdd7a3fac45f (20:34): the client is expecting the tcp packet to be sent from the same IP that it sent it to",
        "a36ce7ae1130478e5c64a077a04575ae (20:35): maxine, ???",
        "d949efae795da71ef603b60b018d191c (20:35): seele_: bugger all, i dunno",
        "9299067386c74d29bacdfdd7a3fac45f (20:35): flupke, i appreciate your help, let me put it this way",
        "9299067386c74d29bacdfdd7a3fac45f (20:36): we have server A, B, C.  A sends B a request which is redirected to C",
        "a42624e60c354ef9b10da3dfb465457c (20:36): rickBL: I have a 'iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE' in my setup too, I think this does rewrite the responder IP with the router IP",
        "9299067386c74d29bacdfdd7a3fac45f (20:36): if C replies to A, A disregards it because it doesn't know anything about C",
        "a42624e60c354ef9b10da3dfb465457c (20:38): rickBL: -o eth1 would become -s XX, but I'm not sure about that",
        "a42624e60c354ef9b10da3dfb465457c (20:50): rickBL: reading the man page, your SNAT POSTROUTING setup seems to be the way to go if B has a static IP XX, prefered to MASQUERADE. but should'nt you do a -s Z instead of -d Z ?",
        "78934bd80782f14536272b6b4da676ee (21:14): hey all. the 'unclean' mmodule, does it have a homepage?  doe anyone know what kernel option it requires?",
        "89d335ace62763c104082ee1becef58a (21:21): Dont think its used anymore.",
        "78934bd80782f14536272b6b4da676ee (21:37): oh.. do you know why TmBerg ?",
        "89d335ace62763c104082ee1becef58a (21:50): Dont remember. obsolet ( spelling? ) or something."
    ],
    "person_ids": [
        "a36ce7ae1130478e5c64a077a04575ae",
        "a42624e60c354ef9b10da3dfb465457c",
        "13fbb6cc9f88ccfc50845bb81132b4d4",
        "05d47a27f3c818abbf125051a57b268c",
        "8424fc362733d1e863a5f4bb3e8c3cb0",
        "9299067386c74d29bacdfdd7a3fac45f",
        "d949efae795da71ef603b60b018d191c",
        "78934bd80782f14536272b6b4da676ee",
        "89d335ace62763c104082ee1becef58a"
    ]
}