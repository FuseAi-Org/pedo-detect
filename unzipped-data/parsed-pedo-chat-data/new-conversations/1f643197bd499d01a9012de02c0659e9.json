{
    "id": "1f643197bd499d01a9012de02c0659e9",
    "messages": [
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:48): M65FLXFAILZAOVV3MGBZKTGQDLOPNXSP6ORA4VCGOV5S6YEIMHJK-",
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:48): MH3GP3PAP4MTWCLHNEB62EZON43CNIHWOBXMSATQKC6VMLXTC6QJ-",
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:48): 4JCRXRKCLNMSNRTDZTYX25DU5BXTRDLE5BBPIWSPIVSCGOAQY",
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:48): ups",
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:48): sorry",
        "6f4ec514eee84cc58c8e610a0c87d7a2 (10:50): exit",
        "05403831f2661084981b8a1edbc0c736 (10:51): lol",
        "65325d50b2e25aca54bc871b89758c9c (10:53): b8810fee2f4a71f849f3f7409546d1d9: do you know where in a Firefox .app bundle I can find the default encoding used for HTML in this localization? or is the table in the source somewhere?",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:03): 65325d50b2e25aca54bc871b89758c9c: in the local jar (en-US.jar in the en-US case) in file locale/LOCALENAME/global-platform/OS/intl.properties",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:03): 65325d50b2e25aca54bc871b89758c9c: pref intl.charset.default",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:04): where LOCALENAME is a code like en-US",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:04): and OS is mac, unix or win",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:04): s/local jar/locale jar",
        "65325d50b2e25aca54bc871b89758c9c (11:04): is that in the source code or in the binary?",
        "65325d50b2e25aca54bc871b89758c9c (11:05): ok I found it",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:05): http://mxr.mozilla.org/l10n-mozilla1.9.1/find?text=&amp;kind=text&amp;string=intl.properties",
        "65325d50b2e25aca54bc871b89758c9c (11:06): we should probably copy the Firefox behavior for Safari/WebKit",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:06): Korean sets it to EUC-KR, for example: http://mxr.mozilla.org/l10n-mozilla1.9.1/source/ko/toolkit/chrome/global/intl.properties",
        "65325d50b2e25aca54bc871b89758c9c (11:06): right now we use WinLatin1 as the default for all locales",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:07): 65325d50b2e25aca54bc871b89758c9c: interesting! I guess it's good enough, then. Do you know if users routinely change it e.g. in Japan or Russia?",
        "65325d50b2e25aca54bc871b89758c9c (11:08): b8810fee2f4a71f849f3f7409546d1d9: I think it's not good enough for at least some locales",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:08): ok",
        "65325d50b2e25aca54bc871b89758c9c (11:08): b8810fee2f4a71f849f3f7409546d1d9: Apple just doesn't sell as much to those locales so it hasn't been a priority",
        "65325d50b2e25aca54bc871b89758c9c (11:08): I know that in Russia, defaulting to Latin1 fails",
        "65325d50b2e25aca54bc871b89758c9c (11:08): I believe it's bad in China and Japan too",
        "65325d50b2e25aca54bc871b89758c9c (11:08): and probably Korea",
        "65325d50b2e25aca54bc871b89758c9c (11:08): other than that, I don't know",
        "65325d50b2e25aca54bc871b89758c9c (11:09): I have not heard of problem reports from Israel, Greece, Eastern/Central Europe, etc where I believe we have non-trivial presence",
        "65325d50b2e25aca54bc871b89758c9c (11:10): I just wanted to verify that some of the countries in 69b0d3dfe919a6b860a9fac82de52a7e's map of the &quot;Western World&quot; don't get Latin-1 in Firefox",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:11): 65325d50b2e25aca54bc871b89758c9c: which country doesn't?",
        "65325d50b2e25aca54bc871b89758c9c (11:11): Poland, Greece, Israel are the three I checked",
        "65325d50b2e25aca54bc871b89758c9c (11:12): based on that I would expect that Czech, Hungary, the baltic states, slovakia, and croatia do not either",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:12): where did 69b0d3dfe919a6b860a9fac82de52a7e define any of those countries as Western? (I see Firefox defines Greece as Western)",
        "65325d50b2e25aca54bc871b89758c9c (11:12): he linked to this map of &quot;the Western world&quot;: http://upload.wikimedia.org/wikipedia/commons/6/6f/Westerncultures_map.png",
        "65325d50b2e25aca54bc871b89758c9c (11:13): (not in the spec, in email discussion)",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:13): OK. that clearly doesn't properly match Windows-1252",
        "65325d50b2e25aca54bc871b89758c9c (11:14): I suggested that instead of &quot;Western demographics&quot;, the spec should refer to &quot;locales that use the Latin script&quot;, perhaps with explicit reference to windows-1252 completely or almost completely covering their alphabets",
        "65325d50b2e25aca54bc871b89758c9c (11:14): but it might be that Windows-1252 is also the default in some locales for historic reasons only; I did not check",
        "65325d50b2e25aca54bc871b89758c9c (11:15): I suspect there are also countries not on 69b0d3dfe919a6b860a9fac82de52a7e's map that would probably use 1252 (probably Albania for instance)",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:15): 65325d50b2e25aca54bc871b89758c9c: that would still be wrong for Polish, Czech, etc.",
        "65325d50b2e25aca54bc871b89758c9c (11:16): b8810fee2f4a71f849f3f7409546d1d9: yes, just saying &quot;Latin script&quot; would be wrong, but saying &quot;locales that primarily use the Latin script, and where Windows-1252 completely or almost completely covers their alphabet&quot; would be right",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:16): 65325d50b2e25aca54bc871b89758c9c: I'm not yet sure if that covers Estonia the right way",
        "65325d50b2e25aca54bc871b89758c9c (11:16): the Estonian language is not covered by 1252",
        "65325d50b2e25aca54bc871b89758c9c (11:17): whether 1252 gets used anyway, I don't know",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:17): 65325d50b2e25aca54bc871b89758c9c: but do browsers still traditionally ship with a Windows-1252 default to Estonia?",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:17): 65325d50b2e25aca54bc871b89758c9c, such a definition is very close to circular",
        "65325d50b2e25aca54bc871b89758c9c (11:17): 6d05f0c2942adc25946a4b02b37ffa00: it's not circular at all",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:18): i guess not, but still",
        "65325d50b2e25aca54bc871b89758c9c (11:18): it assumes a text encoding based on the alphabet of the locale",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:18): I still think it would be more useful to define the defaults for locales where you don't get away with shipping with Windows-1252",
        "65325d50b2e25aca54bc871b89758c9c (11:18): which is in fact how that decision is actually made",
        "65325d50b2e25aca54bc871b89758c9c (11:18): b8810fee2f4a71f849f3f7409546d1d9: there's definitely some locales where shipping Windows-1252 is a big problem",
        "65325d50b2e25aca54bc871b89758c9c (11:19): b8810fee2f4a71f849f3f7409546d1d9: I don't think any current browser has a custom default encoding for only those locales",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:19): 65325d50b2e25aca54bc871b89758c9c: FWIW, in the 1980s, Apple (rightly) decided to ship MacRoman to Finland even though MacRoman doesn't cover the whole alphabet according to orthographers in ivory towers",
        "65325d50b2e25aca54bc871b89758c9c (11:21): b8810fee2f4a71f849f3f7409546d1d9: I'm not saying it would be wrong to change the default encoding for only a small number of locales; I'm just not sure anyone actually would do that",
        "69b0d3dfe919a6b860a9fac82de52a7e (11:32): b8810fee2f4a71f849f3f7409546d1d9 and i were talking about this earlier, and i think the preferable solution would be a table that lists the places where 1252 isn't the default, and lists what the default should be there",
        "69b0d3dfe919a6b860a9fac82de52a7e (11:32): and then says &quot;1252 for everything else&quot;",
        "b25b6b77a0087ff8385941e5545d32ea (11:33): thinks this has generated a lot of discussion for a non-normative sentence that could be cut from the spec without significant harm",
        "b25b6b77a0087ff8385941e5545d32ea (11:33): (unless you do actually spec the default in other places but I guess that will cause even more discussion)",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:35): 69b0d3dfe919a6b860a9fac82de52a7e, that sounds good, although it still sucks",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:35): one day I'll find a better solution",
        "69b0d3dfe919a6b860a9fac82de52a7e (11:36): HTML sucks, but one day we'll find a better solution. :-)",
        "b25b6b77a0087ff8385941e5545d32ea (11:36): Listing it based on places rather than language sounds wrong.",
        "69b0d3dfe919a6b860a9fac82de52a7e (11:36): i don't mind what the key is",
        "65325d50b2e25aca54bc871b89758c9c (11:36): 69b0d3dfe919a6b860a9fac82de52a7e: I like that idea, if browsers are actually willing to follow such a list",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:36): having pages render correctly based on the local of your browser is just a tad too wrong",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:37): though apparently so far the only workable solution",
        "b25b6b77a0087ff8385941e5545d32ea (11:37): Yeah the whole idea of a locale-specific default is clearly broken. But there is nothing we can do",
        "65325d50b2e25aca54bc871b89758c9c (11:37): 6d05f0c2942adc25946a4b02b37ffa00: another possibility is to try to guess the language, or do it based on country code TLDs, but I suspect that would be more broken too",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:37): 6d05f0c2942adc25946a4b02b37ffa00: Opera Mini doesn't have charset defaulting UI, and Opera Mini works in Norway and Russia. How does it deal?",
        "b25b6b77a0087ff8385941e5545d32ea (11:37): 65325d50b2e25aca54bc871b89758c9c: The spec already allows for that of course",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:38): b8810fee2f4a71f849f3f7409546d1d9, we don't? I've no idea",
        "65325d50b2e25aca54bc871b89758c9c (11:38): The spec does let you autodetect encoding, I don't think it lets you guess based on the TLD",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:38): is fixing XHR bugs",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:38): after that I'm going to strongly consider working on CSSOM again",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:38): seems more high-pri than Web Encoding",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:38): s",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:39): I have no idea how charsets work in Opera Mini, but the inputs have to be page, heuristics, server domain, client localization and/or client address, because there's no UI",
        "b25b6b77a0087ff8385941e5545d32ea (11:40): 65325d50b2e25aca54bc871b89758c9c: I don't see why &quot;other algorithms to the data stream&quot; couldn't include looking at the URL",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:40): Interestingly, Nokia felt they should include the charset menu in MicroB",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:41): mkay, I'm somewhat intrigued now, if I run across someone from what team I'll ask",
        "b8810fee2f4a71f849f3f7409546d1d9 (11:41): isn't curious enough to install a Russian localization of Mini for testing if the UI language is an input",
        "b25b6b77a0087ff8385941e5545d32ea (11:42): 6d05f0c2942adc25946a4b02b37ffa00: You could go up a couple of floors and you would run into dozens of them ;)",
        "6d05f0c2942adc25946a4b02b37ffa00 (11:42): that'd require effort :)",
        "b25b6b77a0087ff8385941e5545d32ea (11:44): 65325d50b2e25aca54bc871b89758c9c: (ALthough I guess data stream could be interpreted as the document rather than the document+headers but it's hard to tell because that section variously talks about &quot;resource&quot;, &quot;file&quot; and &quot;data stream&quot;)",
        "65325d50b2e25aca54bc871b89758c9c (11:44): b25b6b77a0087ff8385941e5545d32ea: if it turns out to be a workable solution I'm sure no one will let the spec stop them",
        "b25b6b77a0087ff8385941e5545d32ea (11:45): 65325d50b2e25aca54bc871b89758c9c: Indeed, so we may as well make it explicitly allowed",
        "b25b6b77a0087ff8385941e5545d32ea (11:46): will file a bug",
        "6d05f0c2942adc25946a4b02b37ffa00 (12:10): I guess XHR should get domintro boxes as well",
        "6d05f0c2942adc25946a4b02b37ffa00 (12:10): but maybe during CR so I don't have to fix bugs all the time in two places",
        "6d05f0c2942adc25946a4b02b37ffa00 (12:10): adds a note",
        "a11aabeeceeae6b8cb5d12ea06b56554 (12:12): domintro?",
        "a11aabeeceeae6b8cb5d12ea06b56554 (12:13): Just introduction to the DOM in general, or?",
        "6d05f0c2942adc25946a4b02b37ffa00 (12:16): a11aabeeceeae6b8cb5d12ea06b56554, class=domintro",
        "6d05f0c2942adc25946a4b02b37ffa00 (12:16): see html5"
    ],
    "person_ids": [
        "6f4ec514eee84cc58c8e610a0c87d7a2",
        "05403831f2661084981b8a1edbc0c736",
        "65325d50b2e25aca54bc871b89758c9c",
        "b8810fee2f4a71f849f3f7409546d1d9",
        "6d05f0c2942adc25946a4b02b37ffa00",
        "69b0d3dfe919a6b860a9fac82de52a7e",
        "b25b6b77a0087ff8385941e5545d32ea",
        "a11aabeeceeae6b8cb5d12ea06b56554"
    ]
}