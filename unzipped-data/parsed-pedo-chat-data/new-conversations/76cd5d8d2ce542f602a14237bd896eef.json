{
    "id": "76cd5d8d2ce542f602a14237bd896eef",
    "messages": [
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:05): boothound: So it's running as user &quot;tomcat&quot;.",
        "9b25659c8241f629a84bb0378373adf4 (21:05): haaa",
        "9b25659c8241f629a84bb0378373adf4 (21:05): how to change this ?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:05): boothound: Try looking into the /etc/init.d/tomcat script.",
        "9b25659c8241f629a84bb0378373adf4 (21:05): did you see in the traces &quot;user = tomcat&quot; ??",
        "9b25659c8241f629a84bb0378373adf4 (21:06): yes I will try to look in /etc/init.d/tomcat",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:06): Well, all the way to the left, the user that the process is running as is &quot;tomcat&quot;.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:06): Notice that the next line that shows &quot;grep java&quot; is running as root.. (look all the way to the left)",
        "8120a453e81b6c992d86525749b7201a (21:06): jasonb: Thanks for the information.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:07): Dalios``: Are you running a high traffic web site?",
        "8120a453e81b6c992d86525749b7201a (21:07): jasonb: yes",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:07): Dalios``: Like, how many requests per day?  And, is it just one Tomcat box?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:09): Dalios``: Have a look at CATALINA_HOME/bin/tool-wrapper.sh",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:10): Dalios``: That script is for starting up your own code inside a Tomcat-like environment.. including the same classloader setup.",
        "9b25659c8241f629a84bb0378373adf4 (21:10): jasonb : the user in /etc/init.d/tomcat5 was &quot;tomcat&quot; I change it to &quot;root&quot; but still not listening on port 80",
        "8120a453e81b6c992d86525749b7201a (21:10): jasonb: approximately 30,000-35,000 requests per instance on 15 Tomcat instances.",
        "8120a453e81b6c992d86525749b7201a (21:11): jasonb: Thanks for the script location.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:11): boothound: What user is the JVM now running as?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:11): Dalios``: 15 instances on the same machine?",
        "9b25659c8241f629a84bb0378373adf4 (21:11): ps -ef | grep java ?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:12): yes.",
        "8120a453e81b6c992d86525749b7201a (21:12): jasonb: 15 instances on 15 separate machines",
        "9b25659c8241f629a84bb0378373adf4 (21:12): ps -ef | grep java",
        "9b25659c8241f629a84bb0378373adf4 (21:12): tomcat   17439     1 28 18:11 pts/2    00:00:09 /usr/lib/jvm/java/bin/java -Djava.endorsed.dirs=/usr/share/tomcat5/common/endorsed -classpath /usr/lib/jvm/java/lib/tools.jar:/usr/share/tomcat5/bin/bootstrap.jar:/usr/share/java/commons-logging-api.jar:/usr/share/java/mx4j/mx4j.jar -Dcatalina.base=/usr/share/tomcat5 -Dcatalina.home=/usr/share/tomcat5 -Djava.io.tmpdir=/usr/share/tomcat5/temp org.apache.catalina.startup.Bootstrap start",
        "9b25659c8241f629a84bb0378373adf4 (21:12): root     17492  3307  0 18:11 pts/2    00:00:00 grep java",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:12): Dalios``: Ok.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:12): boothound: So it's still running as user tomcat.",
        "9b25659c8241f629a84bb0378373adf4 (21:13): where do you see the user &quot;tomcat&quot; ??",
        "9b25659c8241f629a84bb0378373adf4 (21:13): how do you do ??",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:13): boothound: All the way to the left, like I've been saying.",
        "9b25659c8241f629a84bb0378373adf4 (21:14): so the user is still &quot;tomcat&quot; ?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:14): yes.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:14): boothound: Is there a config file in /etc/tomcat/tomcat.conf  or tomcat.something?  :)",
        "9b25659c8241f629a84bb0378373adf4 (21:14): haaa, what If I change the role of the user &quot;tomcat&quot; to &quot;admin,manager&quot; ??",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:15): boothound: ignore tomcat-user.xml for now.",
        "9b25659c8241f629a84bb0378373adf4 (21:15): yes .. there is something like tomcat5.conf",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:15): boothound: Edit that..  I don't remember what all is in there, but it might contain the user to run Tomcat as.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:15): boothound: If not, then you just need to edit the init script more.",
        "9b25659c8241f629a84bb0378373adf4 (21:15): ok, I am editing this file ....",
        "9b25659c8241f629a84bb0378373adf4 (21:16): in tomcat5.conf there is a line with TOMCAT_USER=&quot;tomcat&quot; I will change this",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:17): ahh, yeah.",
        "9b25659c8241f629a84bb0378373adf4 (21:18): oohhhhhh yeah, you'r great , wonderful ,",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:18): heh",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:18): Worked?",
        "9b25659c8241f629a84bb0378373adf4 (21:18): thank you very much",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:18): You're welcome.",
        "9b25659c8241f629a84bb0378373adf4 (21:18): It is listening on port 80",
        "9b25659c8241f629a84bb0378373adf4 (21:18): excellent , thank you very much",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:18): No prob.",
        "9b25659c8241f629a84bb0378373adf4 (21:18): have a nice day",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:19): There are also other ways of making it listen on port 80.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:19): But, doing it that way should be fine for you.",
        "9b25659c8241f629a84bb0378373adf4 (21:19): other ways ? like ... ?",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:19): Well, on Linux, there's something called iptables that lets you relay packets from port 80 to port 8080, for example.",
        "9b25659c8241f629a84bb0378373adf4 (21:20): ah yes, so if I add some port redirecting it will work also ??",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:20): Yes, it would.  But, each time you boot you would need to configure iptables to do the port redirection.",
        "9b25659c8241f629a84bb0378373adf4 (21:21): for the moment this solution is the best one for me I think ....",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:21): It's not hard to do, you just put some lines into your /etc/rc.d/rc.local file.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:21): Ok.",
        "9b25659c8241f629a84bb0378373adf4 (21:21): something like /etc/init.d/iptables save will save the rules",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:21): I just wanted you to know there are other ways of doing it.",
        "9b25659c8241f629a84bb0378373adf4 (21:21): thank you very much",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:21): boothound: No problem.",
        "9b25659c8241f629a84bb0378373adf4 (21:22): I will now play with my tomcat",
        "9b25659c8241f629a84bb0378373adf4 (21:22): thanks",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:22): Yeah, iptables save would store them, but I don't suggest doing that because that's error prone.",
        "2a78e4ddb897d821d45a3ba9ce2078d5 (21:22): (although if you're watchful in the right ways, it works)"
    ],
    "person_ids": [
        "2a78e4ddb897d821d45a3ba9ce2078d5",
        "9b25659c8241f629a84bb0378373adf4",
        "8120a453e81b6c992d86525749b7201a"
    ]
}