{
    "id": "fc6b1a4e606841ace3fcd955c773f9b5",
    "messages": [
        "cc097e0d7183ae8436e7df709553c8c0 (15:04): b8810fee2f4a71f849f3f7409546d1d9: http://forums.whatwg.org/viewtopic.php?t=114",
        "cc097e0d7183ae8436e7df709553c8c0 (15:05): &lt;audio&gt;'s transparent content model and &lt;figure&gt;'s content model don't seem to work together",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:07): cc097e0d7183ae8436e7df709553c8c0: in spec or in my impl?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:07): in the spec",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:07): so does validator.nu have a bug?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:07): not sure",
        "1e907c9f9c95cf39d33f2a743798d482 (15:08): But audio is embedded content, which is allowed in figure",
        "cc097e0d7183ae8436e7df709553c8c0 (15:08): yes, however &lt;audio&gt; has a transparent content model",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:08): 1e907c9f9c95cf39d33f2a743798d482: Have you checked the latest spec on &lt;audio&gt;? you should do the format fallback using &lt;source&gt; instead of nested &lt;audio&gt;",
        "1e907c9f9c95cf39d33f2a743798d482 (15:09): Semi-transparent, does that make a difference?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:09): http://www.whatwg.org/specs/web-apps/current-work/multipage/section-documents0.html#transparent0",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:10): isn't a fan of transparent content models",
        "1e907c9f9c95cf39d33f2a743798d482 (15:10): format fallback instead of nested? The latest spec says to nest source element inside audio element",
        "1e907c9f9c95cf39d33f2a743798d482 (15:11): cc097e0d7183ae8436e7df709553c8c0, that part on transparent content model makes my implementation correct and the validator wrong.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:12): &lt;figure&gt;&lt;legend&gt;&lt;/legend&gt;&lt;audio src=x&gt;TEST&lt;/audio&gt;&lt;/figure&gt; isn't conforming because &lt;figure&gt;&lt;legend&gt;&lt;/legend&gt;TEST&lt;/figure&gt; isn't",
        "1e907c9f9c95cf39d33f2a743798d482 (15:12): I must say, it's highly confusing.",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:12): 1e907c9f9c95cf39d33f2a743798d482: you have two nested &lt;audio&gt; elements",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:12): I'm reviewing the schema for bugs",
        "cc097e0d7183ae8436e7df709553c8c0 (15:12): it seems to me that this is a bug in the spec",
        "1e907c9f9c95cf39d33f2a743798d482 (15:12): Yes, b8810fee2f4a71f849f3f7409546d1d9, I do now... I started out with one audio element and two nested sources",
        "1e907c9f9c95cf39d33f2a743798d482 (15:13): I'll change that, but it'll have the same effect.",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:13): IIRC, this is a spec bug",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:13): I think I've mentioned this to Hixie",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:15): 1e907c9f9c95cf39d33f2a743798d482: figure wants an embedded content element",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:15): 1e907c9f9c95cf39d33f2a743798d482: and &lt;audio&gt; is transparent",
        "1e907c9f9c95cf39d33f2a743798d482 (15:15): Semi-transparent?",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:15): 1e907c9f9c95cf39d33f2a743798d482: so the result is that the audio element wants an embedded child too",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:15): 1e907c9f9c95cf39d33f2a743798d482: semi is about &lt;source&gt;",
        "1e907c9f9c95cf39d33f2a743798d482 (15:16): OK",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:16): so Validator.nu is unhelpful here, but it's really a spec issue",
        "1e907c9f9c95cf39d33f2a743798d482 (15:16): So removing the figure element should solve that problem",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:16): 1e907c9f9c95cf39d33f2a743798d482: yes",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:17): This should probably be fixed by allowing text blocks as figures",
        "1e907c9f9c95cf39d33f2a743798d482 (15:18): Or maybe let media elements be real embed content?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:18): they are embedded content",
        "1e907c9f9c95cf39d33f2a743798d482 (15:18): Spec says:",
        "1e907c9f9c95cf39d33f2a743798d482 (15:18): Contexts in which this element may be used:",
        "1e907c9f9c95cf39d33f2a743798d482 (15:18): As the only embedded content child of a figure element.",
        "1e907c9f9c95cf39d33f2a743798d482 (15:18): So use in figure element should be according to spec",
        "1e907c9f9c95cf39d33f2a743798d482 (15:19): thus spec contradicts self",
        "cc097e0d7183ae8436e7df709553c8c0 (15:19): 1e907c9f9c95cf39d33f2a743798d482: indeed, as we said it's a bug in the spec :)",
        "1e907c9f9c95cf39d33f2a743798d482 (15:19): OK :)",
        "1e907c9f9c95cf39d33f2a743798d482 (15:19): Thanks!",
        "cc097e0d7183ae8436e7df709553c8c0 (15:19): np",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:20): 1e907c9f9c95cf39d33f2a743798d482: use of &lt;audio&gt; in &lt;figure&gt; is OK. but the transparent content model sucks in that case, because then the content of &lt;audio&gt; needs to be embedded content, too",
        "1e907c9f9c95cf39d33f2a743798d482 (15:21): So basically using block-level elements inside an audio element is impossible?",
        "1e907c9f9c95cf39d33f2a743798d482 (15:21): As fallback content?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:22): yes (since the other context where &lt;audio&gt; is allowed is where strictly inline-level content is allowed)",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:23): 1e907c9f9c95cf39d33f2a743798d482: impossible per current spec when audio occurs as the child of figure",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:23): oh, and what cc097e0d7183ae8436e7df709553c8c0 said",
        "1e907c9f9c95cf39d33f2a743798d482 (15:24): That's going to provide a lot of feedback...",
        "1e907c9f9c95cf39d33f2a743798d482 (15:24): I can't use block- nor inline-level elements anywhere inside an audio element, according to the validator.",
        "1e907c9f9c95cf39d33f2a743798d482 (15:25): Basically this renders fallback content useless, as you can't provide one or more hyperlinks as alternatives to the content.",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:26): 1e907c9f9c95cf39d33f2a743798d482: http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2007-April/010790.html",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:27): interestingly, Google didn't find that message with relevant keywords",
        "1e907c9f9c95cf39d33f2a743798d482 (15:27): Did you get an answer to that question?",
        "1e907c9f9c95cf39d33f2a743798d482 (15:30): That required descendant that I'm missing... that might be the embedded content you ask about in your question of last April.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:30): 1e907c9f9c95cf39d33f2a743798d482: it's probably on the list of open issues",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:31): 1e907c9f9c95cf39d33f2a743798d482: I thought Hixie acknowledged it, but I can't find anything to that effect in the logs",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:31): 1e907c9f9c95cf39d33f2a743798d482: yes. my guess is that the error goes away if you put an &lt;img&gt; or &lt;embed&gt; there...",
        "1e907c9f9c95cf39d33f2a743798d482 (15:32): I hope this confusion will be edited out before this thing goes live... say, in the next 14 years.",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:32): 1e907c9f9c95cf39d33f2a743798d482: I hope so, too.",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:33): 1e907c9f9c95cf39d33f2a743798d482: occasionally I take matters into my own hands if the spec says something silly, but in this case I'm going with the letter of the spec",
        "cc097e0d7183ae8436e7df709553c8c0 (15:34): the email is in the graphics-video folder in http://www.whatwg.org/issues/",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:34): 1e907c9f9c95cf39d33f2a743798d482: &lt;font&gt; and style='' would be examples of me overriding the spec optimistically.",
        "1e907c9f9c95cf39d33f2a743798d482 (15:34): OK :)",
        "1e907c9f9c95cf39d33f2a743798d482 (15:41): Well, I finally found something that makes the validator happy",
        "1e907c9f9c95cf39d33f2a743798d482 (15:41): I did enter an embed element into the audio element",
        "1e907c9f9c95cf39d33f2a743798d482 (15:42): And moved my fallback content (what I consider fallback) outside of the figure",
        "1e907c9f9c95cf39d33f2a743798d482 (15:42): But the embed element itself can't have fallback content...",
        "1e907c9f9c95cf39d33f2a743798d482 (15:43): So it's either one of the sources, or an embed, or nothing.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:43): i would suggest to ignore any error messages regarding &lt;figure&gt;&lt;audio&gt;",
        "1e907c9f9c95cf39d33f2a743798d482 (15:44): That works too...",
        "cc097e0d7183ae8436e7df709553c8c0 (15:45): but links would probably be useful also for people with html5 browsers, so it makes sense to place the links outside the &lt;audio&gt;",
        "1e907c9f9c95cf39d33f2a743798d482 (15:46): Though that is true, it also makes sense to put them inside the element as fallback content.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:46): yeah, if you want to hide the links from people with html5 browsers",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:47): (fallback is for legacy browsers--not for HTML5 browsers)",
        "b8810fee2f4a71f849f3f7409546d1d9 (15:47): that is, fallback isn't for accessibility or codec fallback",
        "1e907c9f9c95cf39d33f2a743798d482 (15:48): Really?",
        "1e907c9f9c95cf39d33f2a743798d482 (15:48): That's different from what I expected.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:48): it's like the contents of &lt;iframe&gt;",
        "cc097e0d7183ae8436e7df709553c8c0 (15:49): browsers that don't support &lt;iframe&gt; will use the contents",
        "1e907c9f9c95cf39d33f2a743798d482 (15:49): Well... I expect Opera to show the fallback content of an iframe if I tell it not to display iframes...",
        "cc097e0d7183ae8436e7df709553c8c0 (15:49): yes, then you disable support for iframes",
        "1e907c9f9c95cf39d33f2a743798d482 (15:50): And I expect to be able to enter a hyperlink as fallback content, so visitors will be able to browse to the uri themselves.",
        "1e907c9f9c95cf39d33f2a743798d482 (15:50): Those with iframe support don't need that link...",
        "cc097e0d7183ae8436e7df709553c8c0 (15:50): but you don't get the contents of iframes if the iframe references a 404 or something that is not supported",
        "cc097e0d7183ae8436e7df709553c8c0 (15:50): exactly",
        "1e907c9f9c95cf39d33f2a743798d482 (15:50): True",
        "cc097e0d7183ae8436e7df709553c8c0 (15:50): &lt;audio&gt; is the same",
        "1e907c9f9c95cf39d33f2a743798d482 (15:51): But then having only an embed element as fallback of content doesn't cover all bases, does it?",
        "cc097e0d7183ae8436e7df709553c8c0 (15:51): i don't understand the question",
        "1e907c9f9c95cf39d33f2a743798d482 (15:53): Well, suppose a user agent doesn't know html 5: it won't understand the audio element. Suppose it adheres only to the W3 recommendations of html and doesn't know the embed element either... then the user sees nothing.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:53): right",
        "1e907c9f9c95cf39d33f2a743798d482 (15:53): Allowing a simple text as fallback content would at least indicate that something should be present.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:54): yes",
        "1e907c9f9c95cf39d33f2a743798d482 (15:54): Lest we require the user to study the page source...",
        "1e907c9f9c95cf39d33f2a743798d482 (15:55): Thanks for the explanations! I'm heading off.",
        "cc097e0d7183ae8436e7df709553c8c0 (15:55): cya"
    ],
    "person_ids": [
        "cc097e0d7183ae8436e7df709553c8c0",
        "b8810fee2f4a71f849f3f7409546d1d9",
        "1e907c9f9c95cf39d33f2a743798d482"
    ]
}