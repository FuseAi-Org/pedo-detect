{
    "id": "8aa7b508be1bd3e3131116e32a05da7e",
    "messages": [
        "dd504fdc036105fdcbe067b3111f2ae4 (15:51): Hi there, after updating samba to 3.0.22, users are no longer able to open the same file at the same time ... I have oplocks = no on a per share basis, and strict locking = yes in global. What might've changed? as I didn't change the smb.conf nor the files in question",
        "0eb40418ab835cda37dc49b920b73981 (16:04): locking = no ?",
        "0eb40418ab835cda37dc49b920b73981 (16:04): also, quite often, ther eare config file changes, which you can see in the release notes file",
        "0eb40418ab835cda37dc49b920b73981 (16:05): not sure if oplocks =- locking or not.",
        "0eb40418ab835cda37dc49b920b73981 (16:05): ==",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:05): I checked the release notes",
        "0eb40418ab835cda37dc49b920b73981 (16:05): check the smb.conf docs for locking =",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:05): and yes, oplocks should == locking",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:05): checking",
        "0eb40418ab835cda37dc49b920b73981 (16:05): roger that",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:14): this always gets me a bit worried. About locking, the samba docs mention: &quot;You should never need to set this parameter.&quot;",
        "0eb40418ab835cda37dc49b920b73981 (16:15): yup",
        "0eb40418ab835cda37dc49b920b73981 (16:16): i dont use it in my clients user/group/public setup",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:16): neither do I at current",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:17): so I don't see a good reason to change or set it :(",
        "0eb40418ab835cda37dc49b920b73981 (16:17): ok. so .. uh.. dont? :)",
        "0eb40418ab835cda37dc49b920b73981 (16:18): the first person will get a rw oplock, everyone else will get r_only",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:19): what I really don't get is why around 2 hours ago (before I upgraded) everyone was able to read/write to the same file if needed, and now only the first guy to open the file can actually use it. Everyone else just can't do anything with it",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:19): so in other words, everyone should get rw oplock for that file",
        "0eb40418ab835cda37dc49b920b73981 (16:20): umm",
        "0eb40418ab835cda37dc49b920b73981 (16:21): its probably not the best thing to be doing (everyone having concurrent rw perms)",
        "0eb40418ab835cda37dc49b920b73981 (16:21): unless we're talking about a db/file that is the backend for an application with revision control of some sort",
        "0eb40418ab835cda37dc49b920b73981 (16:21): whats advantage do you get from everyone having rw at the same time?",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:22): well, not much choice, seeing as this crap piece of ERP software uses an MS Access db as backend, and everyone should be able (and WAS able) to have it open so they could read/write to it",
        "0eb40418ab835cda37dc49b920b73981 (16:22): locking = no, restart",
        "0eb40418ab835cda37dc49b920b73981 (16:22): and testparm -s ?",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:22): no warnings on testparm",
        "0eb40418ab835cda37dc49b920b73981 (16:23): could be a client issue?",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:24): all clients have been affected after I upgraded, so that seems unlikely :/",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:24): no one has been able to use the file with more than one at a time since",
        "0eb40418ab835cda37dc49b920b73981 (16:26): <a href=\"http://www.fedoraforum.org/forum/archive/index.php/t-50684.html\">http://www.fedoraforum.org/forum/archive/index.php/t-50684.html</a>",
        "0eb40418ab835cda37dc49b920b73981 (16:26): :)",
        "0eb40418ab835cda37dc49b920b73981 (16:27): is locking global only, or does it have share scope as well ?",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:28): locking is global",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:28): but you can set oplocks per share",
        "0eb40418ab835cda37dc49b920b73981 (16:29): what version did you upgrade from/to",
        "0eb40418ab835cda37dc49b920b73981 (16:29): looks to me like oplocks != locking.",
        "419e9e52abadcf16693392d9d7163c48 (16:30): hi ho :-)",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:30): from a probably 6 months to 1 year old version to latest in Debian, which is now at 3.0.22",
        "0eb40418ab835cda37dc49b920b73981 (16:30): well, as per",
        "0eb40418ab835cda37dc49b920b73981 (16:30): <a href=\"http://us1.samba.org/samba/docs/man/manpages-3/smb.conf.5.html\">http://us1.samba.org/samba/docs/man/manpages-3/smb.conf.5.html</a>",
        "0eb40418ab835cda37dc49b920b73981 (16:30): locking != oplocks",
        "419e9e52abadcf16693392d9d7163c48 (16:31): i have a (short) question. if i change the permission of a directory, how to tell samba, that the permissions have been changed without restarting samba?",
        "0eb40418ab835cda37dc49b920b73981 (16:31): theres no need to",
        "0eb40418ab835cda37dc49b920b73981 (16:31): it checks permissions on file/dir access",
        "0eb40418ab835cda37dc49b920b73981 (16:32): faik.",
        "0eb40418ab835cda37dc49b920b73981 (16:32): ryushe, Oplocks may be selectively turned off on certain files with a share. See the veto oplock files parameter.",
        "0eb40418ab835cda37dc49b920b73981 (16:32): oplocks = No should work far as im concerned",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:33): indeed",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:33): but it's not :(",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:33): just tried locking = no as well",
        "0eb40418ab835cda37dc49b920b73981 (16:33): nothin?",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:33): also not working",
        "0eb40418ab835cda37dc49b920b73981 (16:33): werd :D",
        "419e9e52abadcf16693392d9d7163c48 (16:33): hmmm... so maybe its windows, that means, that there is no read permission :(",
        "419e9e52abadcf16693392d9d7163c48 (16:35): EyeCue: but if i restart the samba server it will work fine...",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:36): EyeCue &gt; thanks for the advise so far, me and the company decided to do debugging tonight, as atm I need to restart samba to test stuff, and there are around 80 people waiting every time",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:36): so for now, o/ and thanks for all the fih",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:36): fish even",
        "dd504fdc036105fdcbe067b3111f2ae4 (16:37): (2 hours of sleep is not good)",
        "0eb40418ab835cda37dc49b920b73981 (16:37): indeed, i hadto transplant 400gb raid+ controller last night"
    ],
    "person_ids": [
        "dd504fdc036105fdcbe067b3111f2ae4",
        "0eb40418ab835cda37dc49b920b73981",
        "419e9e52abadcf16693392d9d7163c48"
    ]
}