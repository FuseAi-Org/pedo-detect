{
    "id": "d385d6110f87c29807f3cd59b1a1a933",
    "messages": [
        "e68e8720c7c0da8ebc1121898f7237ea (08:39): I've got two LAN interfaces in a server.  I need IP Forwarding enabled to forward from a LAN interface to the internet.  How do I prevent traffic from going between the two LAN interfaces?",
        "3163d9676dcb4e3d19bcb5508e865662 (08:40): block dstip to the oppsosing lanif if coming from one lanif",
        "e68e8720c7c0da8ebc1121898f7237ea (08:41): Which chain would that fall under?",
        "3163d9676dcb4e3d19bcb5508e865662 (08:43): i believe that would be PREROUTING...",
        "e68e8720c7c0da8ebc1121898f7237ea (08:54): ...  Do iptables rules not work with multiple IP addresses?  I've got eth1:1, eth1:2, etc.  Iptables spits out warnings about &quot;wierd characters in interface&quot;",
        "de76c8e6cbbc3c1c44788a340cac141e (08:54): you can't use :1 interfaces",
        "de76c8e6cbbc3c1c44788a340cac141e (08:54): just use eth1",
        "de76c8e6cbbc3c1c44788a340cac141e (08:54): eth1:1 doesn't really exist",
        "81c9aeea32beb1a1db26e1b2ad30133c (08:56): my iptables default action is deny, and i wanna open port 80 for my http apache server, does this line look right? -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT   my website wont load, my httpd.conf file shows its listening on port 80",
        "de76c8e6cbbc3c1c44788a340cac141e (08:57): MrSako: check for other rules above that one",
        "81c9aeea32beb1a1db26e1b2ad30133c (08:57): could i make a pastebin and could you look at it?",
        "81c9aeea32beb1a1db26e1b2ad30133c (08:59): <a href=\"http://mrsako.pastebin.ca/107808\">http://mrsako.pastebin.ca/107808</a>",
        "81c9aeea32beb1a1db26e1b2ad30133c (08:59): right now its pretty basic and i dont see what coudl be wrong",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:02): btw port 10000 isnt workigng either",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:02): but the ssh one is working",
        "de76c8e6cbbc3c1c44788a340cac141e (09:05): MrSako: looks fine to me",
        "de76c8e6cbbc3c1c44788a340cac141e (09:06): is the HTTP server on the same host as this firewall?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:06): yes",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:06): everything that this firewall is for is all one one machine",
        "de76c8e6cbbc3c1c44788a340cac141e (09:06): do any of the rules have nonzero counter in iptables-save -c?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:08): ?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:08): im really new to this",
        "de76c8e6cbbc3c1c44788a340cac141e (09:08): run iptables-save -c",
        "de76c8e6cbbc3c1c44788a340cac141e (09:08): look at the counters of the rules (stuff in [])",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:09): only ones with 0:0 are the FOWARD ones",
        "de76c8e6cbbc3c1c44788a340cac141e (09:09): ok... it should be working then",
        "de76c8e6cbbc3c1c44788a340cac141e (09:10): actually, you should have a state rule in there",
        "e68e8720c7c0da8ebc1121898f7237ea (09:10): danieldg: I've been messing around with rules for a while.  I can't stack the traffic from going between interfaces...  Could you give me an example of stopping the forwarding of traffic between two interfaces:?",
        "de76c8e6cbbc3c1c44788a340cac141e (09:10): MrSako: iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT",
        "de76c8e6cbbc3c1c44788a340cac141e (09:10): Artimus: block it in FORWARD; -i eth1 -o eth2 -j DROP",
        "e68e8720c7c0da8ebc1121898f7237ea (09:11): danieldg: I don't have an eth2...",
        "e68e8720c7c0da8ebc1121898f7237ea (09:11): That's why I ran into trouble the first time",
        "e68e8720c7c0da8ebc1121898f7237ea (09:11): I've got multiple IP's bound",
        "de76c8e6cbbc3c1c44788a340cac141e (09:11): that's an example...",
        "de76c8e6cbbc3c1c44788a340cac141e (09:11): oh",
        "de76c8e6cbbc3c1c44788a340cac141e (09:11): you'd have to use IPs",
        "de76c8e6cbbc3c1c44788a340cac141e (09:11): -i eth1 -o eth1 -s IPRANGE1 -d IPRANGE2",
        "e68e8720c7c0da8ebc1121898f7237ea (09:12): I did that, but without devices options",
        "de76c8e6cbbc3c1c44788a340cac141e (09:12): that'll work",
        "e68e8720c7c0da8ebc1121898f7237ea (09:12): They can still ping...",
        "de76c8e6cbbc3c1c44788a340cac141e (09:12): are the pings even going through the firewall?",
        "de76c8e6cbbc3c1c44788a340cac141e (09:12): they might be pinging directly",
        "e68e8720c7c0da8ebc1121898f7237ea (09:12): How could they?",
        "e68e8720c7c0da8ebc1121898f7237ea (09:13): 172.16.0.1 should not be able to ping 172.16.1.1, correct?",
        "de76c8e6cbbc3c1c44788a340cac141e (09:13): by pinging one another...",
        "de76c8e6cbbc3c1c44788a340cac141e (09:13): I think linux will send ICMP reroutes",
        "de76c8e6cbbc3c1c44788a340cac141e (09:13): not sure - try a packet sniffer to see if they're going through",
        "de76c8e6cbbc3c1c44788a340cac141e (09:14): (of course, those ranges can ping one another if you have a 255.255.0.0 netmask, but I was assuming /24)",
        "e68e8720c7c0da8ebc1121898f7237ea (09:14): ...",
        "e68e8720c7c0da8ebc1121898f7237ea (09:14): I was always told that 172.16.0.1 and 172.16.1.1 (etc) could not ping, reguardless of subnets",
        "de76c8e6cbbc3c1c44788a340cac141e (09:15): that's wrong",
        "e68e8720c7c0da8ebc1121898f7237ea (09:15): alright, subnetting it is",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:22): when i tried to apply the thing with the related and establish states i got this error",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:22): Applying iptables firewall rules: iptables-restore: line 28 failed",
        "de76c8e6cbbc3c1c44788a340cac141e (09:22): hmm. try modprobe ipt_state",
        "de76c8e6cbbc3c1c44788a340cac141e (09:22): what kernel?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:23): im not sure what kernel it is, its CentOS 4",
        "de76c8e6cbbc3c1c44788a340cac141e (09:23): uname -a",
        "de76c8e6cbbc3c1c44788a340cac141e (09:23): that'll tell you the kernel",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:23): Linux vps.gofastgaming.com 2.6.8-022stab070.9-smp #1 SMP Thu Apr 20 10:35:42 MSD 2006 i686 i686 i386 GNU/Linux",
        "de76c8e6cbbc3c1c44788a340cac141e (09:24): does /proc/net/ip_conntrack exist?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:24): no",
        "de76c8e6cbbc3c1c44788a340cac141e (09:24): modprobe ip_conntrack",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:25): ok, it didnt return anything",
        "de76c8e6cbbc3c1c44788a340cac141e (09:25): does /proc/net/ip_conntrack exist now?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:26): no",
        "de76c8e6cbbc3c1c44788a340cac141e (09:26): :/",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:26): and apparently it doesnt exist anywhere on the machine :{",
        "de76c8e6cbbc3c1c44788a340cac141e (09:27): do you have an ip_conntrack.ko? it'd be in /lib/modules",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:28): i have  a /lib/modules but its empty",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:28): i installed iptables using yum btw",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:28): if that means anything",
        "de76c8e6cbbc3c1c44788a340cac141e (09:28): looks like you have a problem with your kernel",
        "de76c8e6cbbc3c1c44788a340cac141e (09:29): unless centos hides its modules somewhere else...",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:29): hmm i dont even seme to have any .ko files anwyehre",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:29): or a file named conntrack",
        "de76c8e6cbbc3c1c44788a340cac141e (09:29): did you compile your kernel, or use a package?",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:44): used a package",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:44): actualy i didnt even do that",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:44): this is a VPS im renting",
        "de76c8e6cbbc3c1c44788a340cac141e (09:45): can you convince the owner to put conntrack into the kernel? That'd be the best solution",
        "de76c8e6cbbc3c1c44788a340cac141e (09:45): otherwise, you'll have to outgoing connections back in manually",
        "81c9aeea32beb1a1db26e1b2ad30133c (09:46): what are you expecting ot be in /proc/net/ip_conntrack and /lib/modules?",
        "de76c8e6cbbc3c1c44788a340cac141e (09:46): /proc/net/ip_conntrack is a file created by the kernel, keeping a table of connections",
        "de76c8e6cbbc3c1c44788a340cac141e (09:47): I wasn't interested in the contents, only the existance",
        "de76c8e6cbbc3c1c44788a340cac141e (09:47): if it exists, ip_conntrack is in the kernel",
        "de76c8e6cbbc3c1c44788a340cac141e (09:47): /lib/modules has the kernel modules for the running kernel",
        "de76c8e6cbbc3c1c44788a340cac141e (09:48): for example, here, I have /lib/modules/2.6.17+g/kernel/net/netfilter/nf_conntrack.ko"
    ],
    "person_ids": [
        "e68e8720c7c0da8ebc1121898f7237ea",
        "3163d9676dcb4e3d19bcb5508e865662",
        "de76c8e6cbbc3c1c44788a340cac141e",
        "81c9aeea32beb1a1db26e1b2ad30133c"
    ]
}