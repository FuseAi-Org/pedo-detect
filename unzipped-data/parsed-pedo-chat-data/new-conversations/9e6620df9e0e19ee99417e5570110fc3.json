{
    "id": "9e6620df9e0e19ee99417e5570110fc3",
    "messages": [
        "7d03c893d5e319aff7504f429cfca64a (05:31): Im watching the df  output of my oracle partition... and im importing a 16G dump file, and the partition useage is climbing only by a few K per second.. but oracle is using loads of cpu... whats up?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:32): a 16G dump file doesn't contain 16G of data",
        "16ef9805bf33329f1375a7f3b63f4569 (05:32): why would you think it did?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:34): DDL and DML consume CPU",
        "16ef9805bf33329f1375a7f3b63f4569 (05:34): and an import can be CPU-intensive",
        "16ef9805bf33329f1375a7f3b63f4569 (05:34): so, what exactly is the problem you're trying to 'solve'?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:37): hmmm, okay, so I guess that response was wasted on you",
        "7d03c893d5e319aff7504f429cfca64a (05:37): Well im wondering why my disk usages is not going up",
        "7d03c893d5e319aff7504f429cfca64a (05:37): If ive done something wrong with the import department.",
        "16ef9805bf33329f1375a7f3b63f4569 (05:37): why SHOULD it???",
        "16ef9805bf33329f1375a7f3b63f4569 (05:37): are your tablespaces auto-extend???",
        "7d03c893d5e319aff7504f429cfca64a (05:38): What? The database when running takes up 70 gigs",
        "16ef9805bf33329f1375a7f3b63f4569 (05:38): are they filled to capacity and expanding?",
        "7d03c893d5e319aff7504f429cfca64a (05:38): When all the data is imported",
        "16ef9805bf33329f1375a7f3b63f4569 (05:38): on the file system they do",
        "16ef9805bf33329f1375a7f3b63f4569 (05:38): in Oracle they probably are pretty empty",
        "7d03c893d5e319aff7504f429cfca64a (05:38): No its an empty database, and im importing the dump from another system.",
        "16ef9805bf33329f1375a7f3b63f4569 (05:38): and how large are your tablespaces now?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:39): how large did you create them??",
        "16ef9805bf33329f1375a7f3b63f4569 (05:39): unless they are autoextend you will NOT see disk usage increase",
        "16ef9805bf33329f1375a7f3b63f4569 (05:39): not until YOU expand a tablespace by adding a datafile",
        "16ef9805bf33329f1375a7f3b63f4569 (05:40): this 'few k per second' you see is proably a log file from the imp session",
        "7d03c893d5e319aff7504f429cfca64a (05:43): Yes the tablespaces are autoextend.",
        "16ef9805bf33329f1375a7f3b63f4569 (05:43): are they FILLED to capacity?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:43): probably not",
        "16ef9805bf33329f1375a7f3b63f4569 (05:43): until they need to extend they won't",
        "7d03c893d5e319aff7504f429cfca64a (05:44): Hmm ok",
        "16ef9805bf33329f1375a7f3b63f4569 (05:44): and your disk usage won't increase",
        "16ef9805bf33329f1375a7f3b63f4569 (05:44): look, when you create a tablespace Oracle creates a datafile that consumes filesystem space but is essentially empty with respect to Oracle",
        "16ef9805bf33329f1375a7f3b63f4569 (05:45): when Oracle says it's full then it will extend",
        "16ef9805bf33329f1375a7f3b63f4569 (05:45): of course you set LIMITS on how much these files can extend ...",
        "16ef9805bf33329f1375a7f3b63f4569 (05:46): because unlimited growth is, well, foolish",
        "7d03c893d5e319aff7504f429cfca64a (05:46): \u00af/join #",
        "16ef9805bf33329f1375a7f3b63f4569 (05:47): this would be a really good time to visit <a href=\"http://tahiti.oracle.com\">http://tahiti.oracle.com</a> and read the Concepts guide",
        "7d03c893d5e319aff7504f429cfca64a (05:47): Most tablespaces are only 10M each, and there around 20 of them.",
        "16ef9805bf33329f1375a7f3b63f4569 (05:47): ooooooooookay",
        "7d03c893d5e319aff7504f429cfca64a (05:47): And by now all of those should be extending",
        "16ef9805bf33329f1375a7f3b63f4569 (05:47): should they?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:47): have you checked lately?",
        "7d03c893d5e319aff7504f429cfca64a (05:47): Well its been importing for a while now?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:47): so???",
        "7d03c893d5e319aff7504f429cfca64a (05:48): Meh",
        "16ef9805bf33329f1375a7f3b63f4569 (05:50): I'd be querying dba_data_files and dba_free_space to find out how full these tablespaces are",
        "7d03c893d5e319aff7504f429cfca64a (05:50): how do I do that?",
        "16ef9805bf33329f1375a7f3b63f4569 (05:51): I'd be LOOKING at the desc for each of those tables",
        "16ef9805bf33329f1375a7f3b63f4569 (05:51): and figuring it out",
        "16ef9805bf33329f1375a7f3b63f4569 (05:51): you'll need an outer join to get usable results if a tablespace is full",
        "7d03c893d5e319aff7504f429cfca64a (05:54): Ta",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): SELECT\tSUBSTR(tablespace_name, 1, 20) &quot;TABLESPACE_NAME&quot;,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): COUNT(*) &quot;FRAGMENTS&quot;,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): TRUNC(SUM(BYTES)/COUNT(*))/1024 &quot;AVG_FREE&quot;,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): MIN(BYTES)/1024 &quot;MIN_FREE&quot;,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): MAX(BYTES)/1024 &quot;MAX_FREE&quot;,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): SUM(BYTES)/1024 &quot;SUM_FREE&quot;",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): FROM dba_free_space",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): GROUP BY tablespace_name;",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): that will show you free space in a tablespac",
        "7d03c893d5e319aff7504f429cfca64a (05:54): Thanks",
        "16ef9805bf33329f1375a7f3b63f4569 (05:54): remember if there is NO free space you won't get the tablespace name",
        "16ef9805bf33329f1375a7f3b63f4569 (05:55): and you won't have a row for that tablespace",
        "16ef9805bf33329f1375a7f3b63f4569 (05:56): this is why you need an outer join between dba_free_Space and dba_data_files",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): SUM(a.bytes) / b.bytes * 100) &quot;% FREE&quot;",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): FROM\tdba_free_space a,",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): dba_data_files b",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): WHERE a.file_id (+) = b.file_id",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): GROUP BY a.tablespace_name, a.file_id, b.bytes",
        "16ef9805bf33329f1375a7f3b63f4569 (05:58): ORDER BY a.file_id;",
        "16ef9805bf33329f1375a7f3b63f4569 (05:59): let me try that again",
        "16ef9805bf33329f1375a7f3b63f4569 (06:00): check your pm",
        "16ef9805bf33329f1375a7f3b63f4569 (06:00): the formatting may be a bit off",
        "7d03c893d5e319aff7504f429cfca64a (06:10): Cheers"
    ],
    "person_ids": [
        "7d03c893d5e319aff7504f429cfca64a",
        "16ef9805bf33329f1375a7f3b63f4569"
    ]
}