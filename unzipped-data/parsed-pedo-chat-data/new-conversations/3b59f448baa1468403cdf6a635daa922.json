{
    "id": "3b59f448baa1468403cdf6a635daa922",
    "messages": [
        "cc097e0d7183ae8436e7df709553c8c0 (11:00): 8b3687499080633e1898fa1dd209ef81: isn't &quot;URL&quot; in implementations prefixed?",
        "8b3687499080633e1898fa1dd209ef81 (11:00): Not for create* in Gecko",
        "cc097e0d7183ae8436e7df709553c8c0 (11:02): i thought create* were methods on URL",
        "cc097e0d7183ae8436e7df709553c8c0 (11:02): and URL was mozURL in gecko",
        "1651912376f152bc027afcbf48a0a276 (11:03): when a websocket fails due to a bad proxy server, will it fail immediately or will it timeout?",
        "cc097e0d7183ae8436e7df709553c8c0 (11:03): note i didn't suggest to rename createObjectURL",
        "cc097e0d7183ae8436e7df709553c8c0 (11:04): 1651912376f152bc027afcbf48a0a276: i guess it depends on how the proxy is being bad",
        "cc097e0d7183ae8436e7df709553c8c0 (11:04): 1651912376f152bc027afcbf48a0a276: e.g. if the client can't establish a connection to the proxy, it should fail immediately",
        "8b3687499080633e1898fa1dd209ef81 (11:05): Eh?",
        "cc097e0d7183ae8436e7df709553c8c0 (11:06): 1651912376f152bc027afcbf48a0a276: but if the client can connect to the proxy and send the request, but then the proxy doesn't send a response back to the client for some reason, then the client can't know that it failed so will timeout",
        "cc097e0d7183ae8436e7df709553c8c0 (11:06): 8b3687499080633e1898fa1dd209ef81: maybe i'm missing something",
        "8b3687499080633e1898fa1dd209ef81 (11:06): So in Gecko we've basically got partial interface Window { [replaceable] readonly attribute URLProp URL; }; interface URLProp { createObjectURL(); };",
        "8b3687499080633e1898fa1dd209ef81 (11:07): I think the actual URL API hasn't landed yet",
        "1651912376f152bc027afcbf48a0a276 (11:07): cc097e0d7183ae8436e7df709553c8c0: is it possible that the proxy will not respond?",
        "1651912376f152bc027afcbf48a0a276 (11:07): cc097e0d7183ae8436e7df709553c8c0: I'm referring to the proxy issues with non ssl websockets",
        "1651912376f152bc027afcbf48a0a276 (11:07): cc097e0d7183ae8436e7df709553c8c0: if the proxy has a normal failure, long-polling will suffer from it as well so I'm not worry about it",
        "8b3687499080633e1898fa1dd209ef81 (11:07): Or are you suggesting to spec it like that instead of the silly static methods we've got now?",
        "1651912376f152bc027afcbf48a0a276 (11:08): cc097e0d7183ae8436e7df709553c8c0: I'm trying to understand how to implement the fallback to long-polling",
        "1651912376f152bc027afcbf48a0a276 (11:08): cc097e0d7183ae8436e7df709553c8c0: socket.io saves the fact that ws failed in a cookie so they won't try it again",
        "1651912376f152bc027afcbf48a0a276 (11:08): cc097e0d7183ae8436e7df709553c8c0: but if it fails immediately I'm not going to worry about it at all",
        "cc097e0d7183ae8436e7df709553c8c0 (11:09): 8b3687499080633e1898fa1dd209ef81: so gecko shipped window.URL but made it replaceable. i see. i thought it was called mozURL",
        "1651912376f152bc027afcbf48a0a276 (11:09): cc097e0d7183ae8436e7df709553c8c0: I've tried with nginx which doesn't support ws and it fails immediately but I'm not sure if that's how all proxies will behave",
        "8b3687499080633e1898fa1dd209ef81 (11:10): No, the parts that are in the URL spec are prefixed, but I don't think it landed yet",
        "cc097e0d7183ae8436e7df709553c8c0 (11:15): 8b3687499080633e1898fa1dd209ef81: http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1311 - window.URL is defined in my gecko nightly",
        "8b3687499080633e1898fa1dd209ef81 (11:16): Yes",
        "8b3687499080633e1898fa1dd209ef81 (11:16): And it's an instance of MozURLProperty or whatever we called it",
        "cc097e0d7183ae8436e7df709553c8c0 (11:16): sure",
        "cc097e0d7183ae8436e7df709553c8c0 (11:17): what i was trying to say was that i thought it was prefixed",
        "cc097e0d7183ae8436e7df709553c8c0 (11:17): and it wasn't",
        "8b3687499080633e1898fa1dd209ef81 (11:17): Indeed it isn't",
        "cc097e0d7183ae8436e7df709553c8c0 (11:19): although webkit doesn't have URL but has webkitURL",
        "cc097e0d7183ae8436e7df709553c8c0 (11:20): and opera/ie don't have either, right?",
        "cc097e0d7183ae8436e7df709553c8c0 (11:20): i dunno, but my gut suggests that it's still possible to change the name",
        "8b3687499080633e1898fa1dd209ef81 (11:22): Maybe... We shipped it like 8 version ago, though ;)",
        "cc097e0d7183ae8436e7df709553c8c0 (11:22): 1651912376f152bc027afcbf48a0a276: i remember a case being reported with proxies not responding with an earlier version of the handshake",
        "cc097e0d7183ae8436e7df709553c8c0 (11:23): 1651912376f152bc027afcbf48a0a276: i think -00",
        "cc097e0d7183ae8436e7df709553c8c0 (11:23): 1651912376f152bc027afcbf48a0a276: because they wanted complete http requests, and the random bytes wasn't a complete http request, so it wasn't forwarded",
        "cc097e0d7183ae8436e7df709553c8c0 (11:24): 1651912376f152bc027afcbf48a0a276: so the server couldn't send a response back",
        "1651912376f152bc027afcbf48a0a276 (11:24): cc097e0d7183ae8436e7df709553c8c0: now that I think about it, you can also have a problem with enterprise firewall which might just drop the packate",
        "1651912376f152bc027afcbf48a0a276 (11:24): cc097e0d7183ae8436e7df709553c8c0: am I right?",
        "cc097e0d7183ae8436e7df709553c8c0 (11:25): 1651912376f152bc027afcbf48a0a276: dunno",
        "cc097e0d7183ae8436e7df709553c8c0 (11:25): but it seems reasonable to assume that a proxy might not respond for some reason"
    ],
    "person_ids": [
        "cc097e0d7183ae8436e7df709553c8c0",
        "8b3687499080633e1898fa1dd209ef81",
        "1651912376f152bc027afcbf48a0a276"
    ]
}